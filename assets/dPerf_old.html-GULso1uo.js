import{_ as s,c as e,e as a,o as l}from"./app-CZqDObZ4.js";const n={};function t(h,i){return l(),e("div",null,i[0]||(i[0]=[a(`<h1 id="dperf" tabindex="-1"><a class="header-anchor" href="#dperf"><span>dPerf</span></a></h1><p>https://github.com/baidu/dperf</p><p>dperf 是一个100Gbps的网络性能与压力测试软件。</p><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><h3 id="文档" tabindex="-1"><a class="header-anchor" href="#文档"><span>文档</span></a></h3><ul><li><a href="https://github.com/baidu/dperf/blob/main/docs/configuration-CN.md" target="_blank" rel="noopener noreferrer">配置手册</a></li><li><a href="https://github.com/baidu/dperf/blob/main/docs/design-CN.md" target="_blank" rel="noopener noreferrer">设计原理</a></li><li><a href="https://github.com/baidu/dperf/blob/main/docs/build.md" target="_blank" rel="noopener noreferrer">编译指导</a></li><li><a href="https://github.com/baidu/dperf/blob/main/docs/statistics-CN.md" target="_blank" rel="noopener noreferrer">统计说明</a></li></ul><h3 id="优点" tabindex="-1"><a class="header-anchor" href="#优点"><span>优点</span></a></h3><ul><li>性能强大： <ul><li>基于 DPDK，使用一台普通 x86 服务器就可以产生巨大的流量：千万级的 HTTP 每秒新建连接数，数百Gbps的带宽，几十亿的并发连接数</li></ul></li><li>统计信息详细： <ul><li>能够输出详细的统计信息，并且识别每一个丢包</li></ul></li><li>使用场景丰富： <ul><li>可用于对四层负载均衡等四层网关进行性能压力测试、长稳测试</li><li>可用于对云上虚拟机的网络性能进行测试</li><li>可用于对网卡性能、CPU的网络报文处理能力进行测试</li><li>压测场景下，可作为高性能的HTTP Server或HTTP Client单独使用</li></ul></li></ul><h3 id="性能" tabindex="-1"><a class="header-anchor" href="#性能"><span>性能</span></a></h3><h3 id="统计数据" tabindex="-1"><a class="header-anchor" href="#统计数据"><span>统计数据</span></a></h3><h2 id="开始使用" tabindex="-1"><a class="header-anchor" href="#开始使用"><span>开始使用</span></a></h2><h3 id="设置大页" tabindex="-1"><a class="header-anchor" href="#设置大页"><span>设置大页</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 参考如下参数编辑 &#39;/boot/grub2/grub.cfg&#39;，然后重启OS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">linux16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /vmlinuz-...</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nopku</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> transparent_hugepage=never</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default_hugepagesz=1G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hugepagesz=1G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hugepages=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译dpdk" tabindex="-1"><a class="header-anchor" href="#编译dpdk"><span>编译DPDK</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 编辑&#39;config/common_base&#39;打开PMD开关</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Mellanox CX4/CX5 requires &#39;CONFIG_RTE_LIBRTE_MLX5_PMD=y&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># HNS3 requires &#39;CONFIG_RTE_LIBRTE_HNS3_PMD=y&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># VMXNET3 requires &#39;CONFIG_RTE_LIBRTE_VMXNET3_PMD=y&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">TARGET</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">x86_64-native-linuxapp-gcc</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #or arm64-armv8a-linuxapp-gcc</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /root/dpdk/dpdk-stable-19.11.10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> T=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TARGET</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j16</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译dperf" tabindex="-1"><a class="header-anchor" href="#编译dperf"><span>编译dperf</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dperf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RTE_SDK=/root/dpdk/dpdk-stable-19.11.10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RTE_TARGET=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TARGET</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绑定网卡" tabindex="-1"><a class="header-anchor" href="#绑定网卡"><span>绑定网卡</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#Mellanox网卡跳过此步</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#假设PCI号是0000:1b:00.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">modprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uio_pci_generic</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/root/dpdk/dpdk-stable-19.11.10/usertools/dpdk-devbind.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uio_pci_generic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0000:1b:00.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动dperf-server" tabindex="-1"><a class="header-anchor" href="#启动dperf-server"><span>启动dperf server</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#dperf server监听6.6.241.27:80, 网关是6.6.241.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./build/dperf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test/http/server-cps.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="从客户端发送请求" tabindex="-1"><a class="header-anchor" href="#从客户端发送请求"><span>从客户端发送请求</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#客户端IP必须要在配置文件的&#39;client&#39;范围内</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6.6.241.27</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://6.6.241.27/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="运行测试" tabindex="-1"><a class="header-anchor" href="#运行测试"><span>运行测试</span></a></h2><p>下面的例子运行一个HTTP CPS压力测试。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在server端运行dperf ./build/dperf -c test/http/server-cps.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以另一台机器作为client端，运行dperf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./build/dperf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test/http/client-cps.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><h3 id="限制" tabindex="-1"><a class="header-anchor" href="#限制"><span>限制</span></a></h3><h3 id="相关文章" tabindex="-1"><a class="header-anchor" href="#相关文章"><span>相关文章</span></a></h3><h3 id="贡献" tabindex="-1"><a class="header-anchor" href="#贡献"><span>贡献</span></a></h3><h3 id="作者" tabindex="-1"><a class="header-anchor" href="#作者"><span>作者</span></a></h3><h3 id="许可" tabindex="-1"><a class="header-anchor" href="#许可"><span>许可</span></a></h3>`,32)]))}const d=s(n,[["render",t],["__file","dPerf_old.html.vue"]]),p=JSON.parse('{"path":"/MdNote_Public/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7/Perf/dPerf_old.html","title":"dPerf","lang":"zh-CN","frontmatter":{"description":"dPerf https://github.com/baidu/dperf dperf 是一个100Gbps的网络性能与压力测试软件。 介绍 文档 配置手册 设计原理 编译指导 统计说明 优点 性能强大： 基于 DPDK，使用一台普通 x86 服务器就可以产生巨大的流量：千万级的 HTTP 每秒新建连接数，数百Gbps的带宽，几十亿的并发连接数 统计信息...","head":[["meta",{"property":"og:url","content":"https://LincZero.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7/Perf/dPerf_old.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"dPerf"}],["meta",{"property":"og:description","content":"dPerf https://github.com/baidu/dperf dperf 是一个100Gbps的网络性能与压力测试软件。 介绍 文档 配置手册 设计原理 编译指导 统计说明 优点 性能强大： 基于 DPDK，使用一台普通 x86 服务器就可以产生巨大的流量：千万级的 HTTP 每秒新建连接数，数百Gbps的带宽，几十亿的并发连接数 统计信息..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"dPerf\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"dPerf","slug":"dperf","link":"#dperf","children":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[{"level":3,"title":"文档","slug":"文档","link":"#文档","children":[]},{"level":3,"title":"优点","slug":"优点","link":"#优点","children":[]},{"level":3,"title":"性能","slug":"性能","link":"#性能","children":[]},{"level":3,"title":"统计数据","slug":"统计数据","link":"#统计数据","children":[]}]},{"level":2,"title":"开始使用","slug":"开始使用","link":"#开始使用","children":[{"level":3,"title":"设置大页","slug":"设置大页","link":"#设置大页","children":[]},{"level":3,"title":"编译DPDK","slug":"编译dpdk","link":"#编译dpdk","children":[]},{"level":3,"title":"编译dperf","slug":"编译dperf","link":"#编译dperf","children":[]},{"level":3,"title":"绑定网卡","slug":"绑定网卡","link":"#绑定网卡","children":[]},{"level":3,"title":"启动dperf server","slug":"启动dperf-server","link":"#启动dperf-server","children":[]},{"level":3,"title":"从客户端发送请求","slug":"从客户端发送请求","link":"#从客户端发送请求","children":[]}]},{"level":2,"title":"运行测试","slug":"运行测试","link":"#运行测试","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[{"level":3,"title":"限制","slug":"限制","link":"#限制","children":[]},{"level":3,"title":"相关文章","slug":"相关文章","link":"#相关文章","children":[]},{"level":3,"title":"贡献","slug":"贡献","link":"#贡献","children":[]},{"level":3,"title":"作者","slug":"作者","link":"#作者","children":[]},{"level":3,"title":"许可","slug":"许可","link":"#许可","children":[]}]}]}],"git":{},"readingTime":{"minutes":1.57,"words":470},"filePathRelative":"MdNote_Public/01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/网络工具/Perf/dPerf_old.md","excerpt":"\\n<p>https://github.com/baidu/dperf</p>\\n<p>dperf 是一个100Gbps的网络性能与压力测试软件。</p>\\n<h2>介绍</h2>\\n<h3>文档</h3>\\n<ul>\\n<li><a href=\\"https://github.com/baidu/dperf/blob/main/docs/configuration-CN.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">配置手册</a></li>\\n<li><a href=\\"https://github.com/baidu/dperf/blob/main/docs/design-CN.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">设计原理</a></li>\\n<li><a href=\\"https://github.com/baidu/dperf/blob/main/docs/build.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">编译指导</a></li>\\n<li><a href=\\"https://github.com/baidu/dperf/blob/main/docs/statistics-CN.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">统计说明</a></li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"MdNote_Public/01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/网络工具/Perf/dPerf_old.md","value":{"title":"dPerf_old","path":"MdNote_Public/01. DesignAndDevelop/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/网络工具/Perf/dPerf_old.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{d as comp,p as data};
