import{_ as t,c as r,b as n,d as s,e as l,a as i,o as d,r as o}from"./app-CQm44bc7.js";const p={},u={href:"https://juejin.cn/post/7273026558398660648",target:"_blank",rel:"noopener noreferrer"},c={href:"https://blog.csdn.net/zhyh1986/article/details/134292636",target:"_blank",rel:"noopener noreferrer"};function b(v,e){const a=o("ExternalLinkIcon");return d(),r("div",null,[e[4]||(e[4]=n("h1",{id:"wsl管理专题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#wsl管理专题"},[n("span",null,"WSL管理专题")])],-1)),e[5]||(e[5]=n("h2",{id:"特性需求",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#特性需求"},[n("span",null,"特性需求")])],-1)),e[6]||(e[6]=n("p",null,"我使用虚拟机时，有一些需要的特性：",-1)),e[7]||(e[7]=n("div",{class:"ab-note drop-shadow"},[n("table",{class:"ab-table ab-branch-table"},[n("tbody",null,[n("tr",null,[n("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[n("div",null,[n("p",null,"多个不同环境的虚拟机， 可以支持灵活且频繁地创建、销毁他们")])]),n("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[n("div",null,[n("p",null,"虚拟机：可以")])]),n("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[n("div",null,[n("p",null,"WSL：……")])])]),n("tr",null,[n("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[n("div",null,[n("p",null,"环境的稳定性、易迁移性")])]),n("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[n("div",null,[n("p",null,"虚拟机：Docker可以用镜像文件、其他虚拟机可以用Vagrant")])]),n("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[n("div",null,[n("p",null,"WSL：……")])])]),n("tr",null,[n("td",{rowspan:"1",col_index:"0",class:"markdown-rendered"},[n("div",null,[n("p",null,"性能、显卡直连")])]),n("td",{rowspan:"1",col_index:"1",class:"markdown-rendered"},[n("div",null,[n("p",null,"虚拟机：……")])]),n("td",{rowspan:"1",col_index:"2",class:"markdown-rendered"},[n("div",null,[n("p",null,"WSL：更强，允许显卡直连")])])])])])],-1)),e[8]||(e[8]=n("p",null,"关于虚拟机的部分，在其他位置的笔记中。这里只将WSL",-1)),e[9]||(e[9]=n("h2",{id:"多系统管理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#多系统管理"},[n("span",null,[n("strong",null,"多系统管理")])])],-1)),n("p",null,[e[1]||(e[1]=s("仅参考：")),n("a",u,[e[0]||(e[0]=s("在 Windows 中通过 WSL 2 高效使用 Docker")),l(a)])]),e[10]||(e[10]=i(`<h3 id="多个wsl版本管理" tabindex="-1"><a class="header-anchor" href="#多个wsl版本管理"><span>多个wsl版本管理</span></a></h3><p>在开始之前惯例先检查下环境，如果没wsl环境，先去下载</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 版本</span>
<span class="token operator">&gt;</span>wsl <span class="token parameter variable">-v</span>
WSL 版本： <span class="token number">2.0</span>.9.0
内核版本： <span class="token number">5.15</span>.133.1-1
WSLg 版本： <span class="token number">1.0</span>.59
MSRDC 版本： <span class="token number">1.2</span>.4677
Direct3D 版本： <span class="token number">1.611</span>.1-81528511
DXCore 版本： <span class="token number">10.0</span>.25131.1002-220531-1700.rs-onecore-base2-hyp
Windows 版本： <span class="token number">10.0</span>.22631.4169

<span class="token comment"># v1和v2版本的切换</span>
$ wsl --set-default-version <span class="token number">2</span>
<span class="token comment"># 如果需要，wsl版本更新</span>
$ wsl <span class="token parameter variable">--update</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，由于我安装了docker desktop，默认wsl不是我一开始装的ubuntu了。此时如果运行 <code>wsl</code> 会存在问题，docker desktop那个版本最好别动，要 <code>-d</code> 指定进入ubuntu那个版本</p><h3 id="多个wsl系统管理" tabindex="-1"><a class="header-anchor" href="#多个wsl系统管理"><span>多个wsl系统管理</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 已经存在的wsl子系统</span>
<span class="token operator">&gt;</span>wsl <span class="token parameter variable">-l</span> <span class="token parameter variable">-v</span>
  NAME                   STATE           VERSION
* docker-desktop-data    Stopped         <span class="token number">2</span>
  Ubuntu                 Stopped         <span class="token number">2</span>
  docker-desktop         Stopped         <span class="token number">2</span>

<span class="token comment"># 可以在线安装的列表</span>
<span class="token comment"># 安装分发系统也可通过 Microsoft Store 搜索下载安装</span>
$ wsl <span class="token parameter variable">--list</span> <span class="token parameter variable">--online</span>
以下是可安装的有效分发的列表。
使用 <span class="token string">&#39;wsl.exe --install &lt;Distro&gt;&#39;</span> 安装。

NAME                            FRIENDLY NAME
Ubuntu                          Ubuntu
Debian                          Debian GNU/Linux
kali-linux                      Kali Linux Rolling
Ubuntu-18.04                    Ubuntu <span class="token number">18.04</span> LTS
Ubuntu-20.04                    Ubuntu <span class="token number">20.04</span> LTS
Ubuntu-22.04                    Ubuntu <span class="token number">22.04</span> LTS
Ubuntu-24.04                    Ubuntu <span class="token number">24.04</span> LTS
OracleLinux_7_9                 Oracle Linux <span class="token number">7.9</span>
OracleLinux_8_7                 Oracle Linux <span class="token number">8.7</span>
OracleLinux_9_1                 Oracle Linux <span class="token number">9.1</span>
openSUSE-Leap-15.6              openSUSE Leap <span class="token number">15.6</span>
SUSE-Linux-Enterprise-15-SP5    SUSE Linux Enterprise <span class="token number">15</span> SP5
SUSE-Linux-Enterprise-15-SP6    SUSE Linux Enterprise <span class="token number">15</span> SP6
openSUSE-Tumbleweed             openSUSE Tumbleweed

<span class="token comment"># 登录到对应实例</span>
$ wsl <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>Distribution Name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只安装配置内核包即可使用 Docker Desktop，但如果条件允许的情况下，最好还是装一个完整的 Linux 分发版本的子系统</p><h3 id="多个docker管理-docker-desktop" tabindex="-1"><a class="header-anchor" href="#多个docker管理-docker-desktop"><span>多个Docker管理 (docker desktop)</span></a></h3><p>需要注意：</p><blockquote><p>我一开始的理解：</p><ul><li>docker desktop 是 “虚拟机/子系统&quot; 上运行 “虚拟机/docker” 吗？ <ul><li>docker desktop 本质还是在wsl上运行（可以通过 <code>wsl -l -v</code> 命令验证，存在专门用于管理docker desktop的wsl系统）</li><li>但是却可以在不进入wsl环境的情况下直接执行docekr相关命令，就像docker直接安装在windows上</li><li>那为什么不直接在wsl环境下安装docker环境？而是要使用docker desktop？ （待补充）</li></ul></li></ul><p>问GPT：</p><p>Docker Desktop 在 Windows 上如何工作？</p><p>在 Windows 上，Docker Desktop 实际上是在一个轻量级的 Linux 虚拟机 (VM) 内部运行 Docker 引擎。这个 VM 通常使用的是 Hyper-V 技术，而不是 WSL（Windows Subsystem for Linux）直接运行。这意味着 Docker Desktop 在 Windows 上的工作方式是通过创建并管理一个虚拟机，在这个虚拟机中运行 Docker 引擎。</p><p>虽然 Docker Desktop 不是直接在 WSL 中运行的，但它确实可以与 WSL 一起工作。从 Windows 10 开始，Microsoft 引入了 WSL 2，WSL 2 使用了类似于 Docker Desktop 所用的 Hyper-V 后端技术。因此，如果你的系统支持并且启用了 WSL 2，那么你可以选择在 WSL 2 分布式环境中安装 Docker 引擎（如通过 Docker Engine for WSL），这样就可以在 WSL 2 环境中直接使用 Docker 功能，而不需要安装完整的 Docker Desktop。</p><p>为什么使用 Docker Desktop？</p><p>尽管可以在 WSL 中安装 Docker，但使用 Docker Desktop 有几个优点：</p><ul><li>集成度高：Docker Desktop 提供了一个统一的界面来管理 Docker 和 Kubernetes 环境。</li><li>易用性：对于初学者来说，Docker Desktop 提供了一个简单的方式来开始使用 Docker。</li><li>特性丰富：除了基本的容器管理外，Docker Desktop 还包括了像自动更新、团队协作工具集成等功能。</li><li>支持广泛：Docker Desktop 跨平台支持 Windows 和 macOS，提供了一致的体验。</li></ul></blockquote><p>下载完后，在非wsl环境 (在windows上) 也可以完美使用docker命令</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 版本检查</span>
$ <span class="token function">docker</span> <span class="token parameter variable">-v</span>
Docker version <span class="token number">24.0</span>.6, build ed223bc

<span class="token comment"># docker列表检查</span>
$ <span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

$ <span class="token function">docker</span> images <span class="token punctuation">[</span>-q<span class="token punctuation">]</span>
REPOSITORY             TAG       IMAGE ID       CREATED         SIZE
gitlab/gitlab-ce       latest    0943abb03ebc   <span class="token number">11</span> months ago   <span class="token number">2</span>.87GB
gitlab/gitlab-runner   latest    982f26ce4e50   <span class="token number">11</span> months ago   760MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="管理-与挂载点设置" tabindex="-1"><a class="header-anchor" href="#管理-与挂载点设置"><span>管理 与挂载点设置</span></a></h3><h2 id="转-如何创建和管理多个wsl" tabindex="-1"><a class="header-anchor" href="#转-如何创建和管理多个wsl"><span>转 - 如何创建和管理多个WSL</span></a></h2><h3 id="环境安装" tabindex="-1"><a class="header-anchor" href="#环境安装"><span>环境安装</span></a></h3>`,15)),n("p",null,[e[3]||(e[3]=s("参考：")),n("a",c,[e[2]||(e[2]=s("在WSL2中安装多个Ubuntu实例")),l(a)])]),e[11]||(e[11]=i(`<h4 id="第一步-在-wsl2-中安装最新的-ubuntu" tabindex="-1"><a class="header-anchor" href="#第一步-在-wsl2-中安装最新的-ubuntu"><span>第一步：在 WSL2 中安装最新的 Ubuntu</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将实现所有必需的步骤，比如：</p><ul><li>在 Windows 上启用所需的可选组件（Windows Virtualisation Platform 等）</li><li>启用 Windows Subsystem for Linux 2（WSL2）</li><li>将 Linux 内核更新到最新版本</li><li>安装默认的 Linux 发行版，比如最新版的 Ubuntu</li></ul><h4 id="第二步-下载适用于-wsl2-的-ubuntu-压缩包" tabindex="-1"><a class="header-anchor" href="#第二步-下载适用于-wsl2-的-ubuntu-压缩包"><span>第二步：下载适用于 WSL2 的 Ubuntu 压缩包</span></a></h4><p>Ubuntu官方镜像（可手动下载，不使用以下命令）：https://cloud-images.ubuntu.com/releases</p><p>可以从 Ubuntu WSL镜像 中下载适用于 WSL2 的 Ubuntu 镜像压缩包保存到本地。 使用 Windows Terminal 或者 Powershell 来下载，在下载之前先运行以下命令移除 curl 别名：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Remove-Item alias:curl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>接着运行以下命令下载Ubuntu镜像，一定要将整个命令复制到 Windows Terminal 或者 Powershell 中并运行：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token punctuation">((</span><span class="token string">&quot;https://cloud-images.ubuntu.com&quot;</span>,
<span class="token string">&quot;releases/hirsute/release&quot;</span>,
<span class="token string">&quot;ubuntu-21.04-server-cloudimg-amd64-wsl.rootfs.tar.gz&quot;</span><span class="token punctuation">)</span> <span class="token parameter variable">-join</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> \`
<span class="token parameter variable">--output</span> ubuntu-21.04-wsl-rootfs-tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="如何创建和管理多个wsl-多个wsl" tabindex="-1"><a class="header-anchor" href="#如何创建和管理多个wsl-多个wsl"><span>如何创建和管理多个WSL - 多个WSL</span></a></h3><h4 id="第三步-在-wsl2-中安装第二个-ubuntu-实例" tabindex="-1"><a class="header-anchor" href="#第三步-在-wsl2-中安装第二个-ubuntu-实例"><span>第三步：在 WSL2 中安装第二个 Ubuntu 实例</span></a></h4><p>以下命令即可实现：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--import</span> <span class="token operator">&lt;</span>Distribution Name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Installation Folder<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Ubuntu WSL2 Image Tarball path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>将 <code>&lt;Distribution Name&gt;</code> 改成自己想要的名字，比如ubuntu-2，以后启停会用到</li><li>使用 Ubuntu 实例目标安装路径（文件夹）替换掉 <code>&lt;Installation Folder&gt;</code></li><li>最后用上一步下载的 Ubuntu 镜像存储位置替换掉 <code>&lt;Ubuntu WSL2 Image Tarball path&gt;</code> 以上命令运行成功后可以使用 <code>wsl -l -v</code> 查看已安装的发行版。</li></ol><h4 id="第四步-登录到第二个ubuntu实例" tabindex="-1"><a class="header-anchor" href="#第四步-登录到第二个ubuntu实例"><span>第四步：登录到第二个Ubuntu实例</span></a></h4>`,16))])}const k=t(p,[["render",b],["__file","WSL管理专题.html.vue"]]),h=JSON.parse('{"path":"/MdNote_Public/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/WSL/WSL%E7%AE%A1%E7%90%86%E4%B8%93%E9%A2%98.html","title":"WSL管理专题","lang":"zh-CN","frontmatter":{"description":"WSL管理专题 特性需求 我使用虚拟机时，有一些需要的特性： 关于虚拟机的部分，在其他位置的笔记中。这里只将WSL 多系统管理 仅参考：在 Windows 中通过 WSL 2 高效使用 Docker 多个wsl版本管理 在开始之前惯例先检查下环境，如果没wsl环境，先去下载 注意，由于我安装了docker desktop，默认wsl不是我一开始装的ub...","head":[["meta",{"property":"og:url","content":"https://LincZero.github.io/MdNote_Public/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/WSL/WSL%E7%AE%A1%E7%90%86%E4%B8%93%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"WSL管理专题"}],["meta",{"property":"og:description","content":"WSL管理专题 特性需求 我使用虚拟机时，有一些需要的特性： 关于虚拟机的部分，在其他位置的笔记中。这里只将WSL 多系统管理 仅参考：在 Windows 中通过 WSL 2 高效使用 Docker 多个wsl版本管理 在开始之前惯例先检查下环境，如果没wsl环境，先去下载 注意，由于我安装了docker desktop，默认wsl不是我一开始装的ub..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"WSL管理专题\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"WSL管理专题","slug":"wsl管理专题","link":"#wsl管理专题","children":[{"level":2,"title":"特性需求","slug":"特性需求","link":"#特性需求","children":[]},{"level":2,"title":"多系统管理","slug":"多系统管理","link":"#多系统管理","children":[{"level":3,"title":"多个wsl版本管理","slug":"多个wsl版本管理","link":"#多个wsl版本管理","children":[]},{"level":3,"title":"多个wsl系统管理","slug":"多个wsl系统管理","link":"#多个wsl系统管理","children":[]},{"level":3,"title":"多个Docker管理 (docker desktop)","slug":"多个docker管理-docker-desktop","link":"#多个docker管理-docker-desktop","children":[]},{"level":3,"title":"管理 与挂载点设置","slug":"管理-与挂载点设置","link":"#管理-与挂载点设置","children":[]}]},{"level":2,"title":"转 - 如何创建和管理多个WSL","slug":"转-如何创建和管理多个wsl","link":"#转-如何创建和管理多个wsl","children":[{"level":3,"title":"环境安装","slug":"环境安装","link":"#环境安装","children":[{"level":4,"title":"第一步：在 WSL2 中安装最新的 Ubuntu","slug":"第一步-在-wsl2-中安装最新的-ubuntu","link":"#第一步-在-wsl2-中安装最新的-ubuntu","children":[]},{"level":4,"title":"第二步：下载适用于 WSL2 的 Ubuntu 压缩包","slug":"第二步-下载适用于-wsl2-的-ubuntu-压缩包","link":"#第二步-下载适用于-wsl2-的-ubuntu-压缩包","children":[]}]},{"level":3,"title":"如何创建和管理多个WSL - 多个WSL","slug":"如何创建和管理多个wsl-多个wsl","link":"#如何创建和管理多个wsl-多个wsl","children":[{"level":4,"title":"第三步：在 WSL2 中安装第二个 Ubuntu 实例","slug":"第三步-在-wsl2-中安装第二个-ubuntu-实例","link":"#第三步-在-wsl2-中安装第二个-ubuntu-实例","children":[]},{"level":4,"title":"第四步：登录到第二个Ubuntu实例","slug":"第四步-登录到第二个ubuntu实例","link":"#第四步-登录到第二个ubuntu实例","children":[]}]}]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":5.03,"words":1510},"filePathRelative":"MdNote_Public/01. DesignAndDevelop/Virtual/虚拟机/WSL/WSL管理专题.md","excerpt":"\\n<h2>特性需求</h2>\\n<p>我使用虚拟机时，有一些需要的特性：</p>\\n<div class=\\"ab-note drop-shadow\\"><table class=\\"ab-table ab-branch-table\\"><tbody><tr><td rowspan=\\"1\\" col_index=\\"0\\" class=\\"markdown-rendered\\"><div><p>多个不同环境的虚拟机，\\n可以支持灵活且频繁地创建、销毁他们</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"1\\" class=\\"markdown-rendered\\"><div><p>虚拟机：可以</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"2\\" class=\\"markdown-rendered\\"><div><p>WSL：……</p>\\n</div></td></tr><tr><td rowspan=\\"1\\" col_index=\\"0\\" class=\\"markdown-rendered\\"><div><p>环境的稳定性、易迁移性</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"1\\" class=\\"markdown-rendered\\"><div><p>虚拟机：Docker可以用镜像文件、其他虚拟机可以用Vagrant</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"2\\" class=\\"markdown-rendered\\"><div><p>WSL：……</p>\\n</div></td></tr><tr><td rowspan=\\"1\\" col_index=\\"0\\" class=\\"markdown-rendered\\"><div><p>性能、显卡直连</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"1\\" class=\\"markdown-rendered\\"><div><p>虚拟机：……</p>\\n</div></td><td rowspan=\\"1\\" col_index=\\"2\\" class=\\"markdown-rendered\\"><div><p>WSL：更强，允许显卡直连</p>\\n</div></td></tr></tbody></table></div>","autoDesc":true}');export{k as comp,h as data};
