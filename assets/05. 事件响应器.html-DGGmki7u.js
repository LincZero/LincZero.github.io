import{_ as a,e as d,g as l,f as t,j as o,h as n,i as s,r,o as p}from"./app-EuS-Ookm.js";const h={},B={class:"hint-container tip"};function k(c,e){const i=r("RouteLink");return p(),d("div",null,[e[16]||(e[16]=l('<h1 id="事件响应器" tabindex="-1"><a class="header-anchor" href="#事件响应器"><span>事件响应器</span></a></h1><p>事件响应器（Matcher）是对接收到的事件进行响应的基本单元，所有的事件响应器都继承自 <code>Matcher</code> 基类。</p><p>在 NoneBot 中，事件响应器可以通过一系列特定的规则<strong>筛选</strong>出<strong>具有某种特征的事件</strong>，并按照<strong>特定的流程</strong>交由<strong>预定义的事件处理依赖</strong>进行处理。例如，在<a href="../quick-start.mdx">快速上手</a>中，我们使用了内置插件 <code>echo</code> ，它定义的事件响应器能响应机器人用户发送的“/echo hello world”消息，提取“hello world”信息并作为回复消息发送。</p><h2 id="事件响应器辅助函数" tabindex="-1"><a class="header-anchor" href="#事件响应器辅助函数"><span>事件响应器辅助函数</span></a></h2><p>NoneBot 中所有事件响应器均继承自 <code>Matcher</code> 基类，但直接使用 <code>Matcher.new()</code> 方法创建事件响应器过于繁琐且不能记录插件信息。因此，NoneBot 中提供了一系列“事件响应器辅助函数”（下称“辅助函数”）来辅助我们用<strong>最简的方式</strong>创建<strong>带有不同规则预设</strong>的事件响应器，提高代码可读性和书写效率。通常情况下，我们只需要使用辅助函数即可完成事件响应器的创建。</p><p>在 NoneBot 中，辅助函数以 <code>on()</code> 或 <code>on_&lt;type/rule&gt;()</code> 形式出现（例如 <code>on_command()</code>），调用后根据不同的参数返回一个 <code>Type[Matcher]</code> 类型的新事件响应器。</p>',6)),t("p",null,[e[1]||(e[1]=o("目前 NoneBot 提供了多种功能各异的辅助函数、具有共同命令名称前缀的命令组以及具有共同参数的响应器组，均可以从 ")),e[2]||(e[2]=t("code",null,"nonebot",-1)),e[3]||(e[3]=o(" 模块直接导入使用，具体内容参考")),n(i,{to:"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04.%20%E8%BF%9B%E9%98%B6/06.%20%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E5%99%A8%E8%BF%9B%E9%98%B6.html"},{default:s(()=>e[0]||(e[0]=[o("事件响应器进阶")])),_:1}),e[4]||(e[4]=o("。"))]),e[17]||(e[17]=t("h2",{id:"创建事件响应器",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#创建事件响应器"},[t("span",null,"创建事件响应器")])],-1)),t("p",null,[e[6]||(e[6]=o("在上一节")),n(i,{to:"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02.%20%E6%8C%87%E5%8D%97/04.%20%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99%E5%87%86%E5%A4%87.html#%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6"},{default:s(()=>e[5]||(e[5]=[o("创建插件")])),_:1}),e[7]||(e[7]=o("中，我们创建了一个 ")),e[8]||(e[8]=t("code",null,"weather",-1)),e[9]||(e[9]=o(" 插件，现在我们来实现他的功能。"))]),e[18]||(e[18]=l(`<p>我们直接使用 <code>on_command()</code> 辅助函数来创建一个事件响应器：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> on_command</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">weather </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> on_command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;天气&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，我们就获得一个名为 <code>weather</code> 的事件响应器了，这个事件响应器会对 <code>/天气</code> 开头的消息进行响应。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果一条消息中包含“@机器人”或以“机器人的昵称”开始，例如 <code>@bot /天气</code> 时，协议适配器会将 <code>event.is_tome()</code> 判断为 <code>True</code> ，同时也会自动去除 <code>@bot</code>，即事件响应器收到的信息内容为 <code>/天气</code>，方便进行命令匹配。</p></div><h3 id="为事件响应器添加参数" tabindex="-1"><a class="header-anchor" href="#为事件响应器添加参数"><span>为事件响应器添加参数</span></a></h3><p>在辅助函数中，我们可以添加一些参数来对事件响应器进行更加精细的调整，例如事件响应器的优先级、匹配规则等。例如：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> on_command</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot.rule </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> to_me</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">weather </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> on_command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;天气&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">rule</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">to_me</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">aliases</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;weather&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;查天气&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">block</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，我们就获得了一个可以响应 <code>天气</code>、<code>weather</code>、<code>查天气</code> 三个命令的响应规则，需要私聊或 <code>@bot</code> 时才会响应，优先级为 10（越小越优先），阻断事件向后续优先级传播的事件响应器了。这些内容的意义和使用方法将会在后续的章节中一一介绍。</p>`,8)),t("div",B,[e[15]||(e[15]=t("p",{class:"hint-container-title"},"提示",-1)),t("p",null,[e[12]||(e[12]=o("需要注意的是，不同的辅助函数有不同的可选参数，在使用之前可以参考")),n(i,{to:"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04.%20%E8%BF%9B%E9%98%B6/06.%20%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E5%99%A8%E8%BF%9B%E9%98%B6.html#%E5%9F%BA%E6%9C%AC%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"},{default:s(()=>e[10]||(e[10]=[o("事件响应器进阶 - 基本辅助函数")])),_:1}),e[13]||(e[13]=o("或 ")),n(i,{to:"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07.%20api/plugin/on.html#on"},{default:s(()=>e[11]||(e[11]=[o("API 文档")])),_:1}),e[14]||(e[14]=o("。"))])])])}const v=a(h,[["render",k],["__file","05. 事件响应器.html.vue"]]),m=JSON.parse('{"path":"/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02.%20%E6%8C%87%E5%8D%97/05.%20%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E5%99%A8.html","title":"事件响应器","lang":"zh-CN","frontmatter":{"sidebar_position":4,"description":"响应接收到的特定事件","options":{"menu":[{"category":"tutorial","weight":60}]},"head":[["meta",{"property":"og:url","content":"https://LincZero.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/04.%20Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02.%20%E6%8C%87%E5%8D%97/05.%20%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E5%99%A8.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"事件响应器"}],["meta",{"property":"og:description","content":"响应接收到的特定事件"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"事件响应器\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"git":{},"readingTime":{"minutes":3.02,"words":907},"filePathRelative":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","excerpt":"\\n<p>事件响应器（Matcher）是对接收到的事件进行响应的基本单元，所有的事件响应器都继承自 <code>Matcher</code> 基类。</p>\\n<p>在 NoneBot 中，事件响应器可以通过一系列特定的规则<strong>筛选</strong>出<strong>具有某种特征的事件</strong>，并按照<strong>特定的流程</strong>交由<strong>预定义的事件处理依赖</strong>进行处理。例如，在<a href=\\"../quick-start.mdx\\">快速上手</a>中，我们使用了内置插件 <code>echo</code> ，它定义的事件响应器能响应机器人用户发送的“/echo hello world”消息，提取“hello world”信息并作为回复消息发送。</p>","bioChainData":{"outlink":[{"title":"06. 事件响应器进阶","link":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.html"},{"title":"04. 插件编写准备","link":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/04. 插件编写准备.html"},{"title":"on","link":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07. api/plugin/on.html"}],"backlink":[{"title":"02. 响应规则","link":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/03. 深入/02. 响应规则.html"},{"title":"06. 事件响应器进阶","link":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.html"}],"localMap":{"nodes":[{"id":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","value":{"title":"05. 事件响应器","path":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","outlink":["MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md","MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/04. 插件编写准备.md","MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07. api/plugin/on.md"],"backlink":["MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/03. 深入/02. 响应规则.md","MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md"]}},{"id":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md","value":{"title":"06. 事件响应器进阶","path":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md","outlink":[],"backlink":[]}},{"id":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/04. 插件编写准备.md","value":{"title":"04. 插件编写准备","path":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/04. 插件编写准备.md","outlink":[],"backlink":[]}},{"id":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07. api/plugin/on.md","value":{"title":"on","path":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07. api/plugin/on.md","outlink":[],"backlink":[]}},{"id":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/03. 深入/02. 响应规则.md","value":{"title":"02. 响应规则","path":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/03. 深入/02. 响应规则.md","outlink":[],"backlink":[]}}],"links":[{"source":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","target":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md"},{"source":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","target":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/04. 插件编写准备.md"},{"source":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md","target":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/07. api/plugin/on.md"},{"source":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/03. 深入/02. 响应规则.md","target":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md"},{"source":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/04. 进阶/06. 事件响应器进阶.md","target":"MdNote_Public/01. DesignAndDevelop/Develop/04. Project/Platform/SoftCode/ChatBot/NoneBot2/version-2.4.1/02. 指南/05. 事件响应器.md"}]}}}');export{v as comp,m as data};
