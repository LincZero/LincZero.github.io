import{_ as i,c as a,e as n,o as e}from"./app-Dnpl954R.js";const l={};function t(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="wsl使用systemd" tabindex="-1"><a class="header-anchor" href="#wsl使用systemd"><span>wsl使用systemd</span></a></h1><h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料"><span>资料</span></a></h2><ul><li>这里直接找官方的方案：<a href="https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/" target="_blank" rel="noopener noreferrer">WSL 现已提供 Systemd 支持！</a>（<s>仅win11，原文没说这点，但评论和笔记下面的链接都会提到这点</s>。upDate 2023：后来又更新了，win10也支持了）</li><li>里面的细节比较多，觉得太干了就看国内博文：<a href="https://www.cnblogs.com/wswind/p/wsl2-official-systemd.html" target="_blank" rel="noopener noreferrer">WSL 2 上启用微软官方支持的 systemd</a>，倒不如说这篇反而更全面，更推荐</li></ul><h2 id="方案类型" tabindex="-1"><a class="header-anchor" href="#方案类型"><span>方案类型</span></a></h2><p>本文首先会介绍如何安装和配置 wsl systemd，并用两个小节去拿它去对比现有的 wsl systemd 解决方案：<a href="https://github.com/arkane-systems/genie" target="_blank" rel="noopener noreferrer">genie</a> 和 <a href="https://github.com/nullpo-head/wsl-distrod" target="_blank" rel="noopener noreferrer">distrod</a>。 如果你是win 10用户，目前(2022/9/30)官方支持的systemd特性还不支持此系统。你仍旧可以使用这两个开源解决方案。</p><h3 id="三种方式的比较" tabindex="-1"><a class="header-anchor" href="#三种方式的比较"><span>三种方式的比较</span></a></h3><h4 id="和genie的对比" tabindex="-1"><a class="header-anchor" href="#和genie的对比"><span>和genie的对比</span></a></h4><p>genie的使用通过<code>genie -s</code>进入运行着systemd的bottle环境，通过<code>genie -u</code>退出，此处需要手动处理或额外配置<code>~/.bashrc</code>。但通过wsl直接运行的shell命令默认又不是位于systemd的bottle之中，这为vscode使用带来了一些问题，需要额外处理: <a href="https://github.com/arkane-systems/genie/wiki/Command-%22code%22-not-found-for-VScode-remote-in-bottle%3F-Here&#39;s-a-solution" target="_blank" rel="noopener noreferrer">1. code命令找不到</a> ，<a href="https://github.com/arkane-systems/genie/wiki/Running-VS-Code-server-for-WSL-inside-genie-bottle" target="_blank" rel="noopener noreferrer">2. vscode server 未运行在bottle中</a></p><p>此外genie首次运行时，会需要等待240秒并显示出无法启动的service，用户需要手动禁用这些有问题的service，才能再下次运行时正常使用。试图<a href="https://github.com/arkane-systems/genie/issues/297" target="_blank" rel="noopener noreferrer">通过配置缩短等待时间，发现只是徒劳</a>。</p><p>总体而言genie的使用还是较为复杂的，使用前需要完整<a href="https://github.com/arkane-systems/genie/wiki" target="_blank" rel="noopener noreferrer">阅读wiki</a>。相比之下官方支持的systemd的使用更为简单。通过简单配置后，是开箱即用，用户无感的。这一点genie无法媲美。</p><h4 id="和distrod的对比" tabindex="-1"><a class="header-anchor" href="#和distrod的对比"><span>和distrod的对比</span></a></h4><p>和官方systemd一样，distrod systemd也是开箱即用的。</p><p>distrod通过修改你的默认shell，来实现运行触发。安装启用distrod时，它自动处理了需要不支持的service。这些都无需用户进行任何额外配置。</p><p>distrod基于ruby编写运行性能很好，运行也很稳定。它还支持基于lxc社区镜像安装多个发行版，且都经过了测试，如：centos / arch / fedora / debian / ubuntu 等等。</p><p>而官方支持的systemd还是有一点是优于distrod的，那就是启用了官方systemd的wsl2实例，在用户停止操作后，会自动关闭，和未启用 systemd 时的特性一样，这有利于节约电脑的计算资源。</p><h3 id="win10-genie" tabindex="-1"><a class="header-anchor" href="#win10-genie"><span>win10 genie</span></a></h3><p>wsl</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> snapd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> snap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --edge</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --classic</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --channel=edge/classic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-genie</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>windows</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --shutdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>wsl</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">genie</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 启动genie守护进程</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">genie</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 进入genie bottle</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --no-headers</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> comm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 再次运行以下命令，检查systemd是否已启动为PID 1。此时输出的结果应该是systemd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list-units</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 接下来，检查您是否可以与systemd后端通信。这应该会列出systemd管理的所有单元</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>补丁：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># snap安装报错：error: Please specify a single channel</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解决方法：用apt安装</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -O-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://packages.arkane-systems.net/arkane.key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gpg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dearmor</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/keyrings/arkane-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;deb [signed-by=/usr/share/keyrings/arkane-keyring.gpg arch=$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dpkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --print-architecture</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) components=main] https://packages.arkane-systems.net/ubuntu/ $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) main&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/arkane-systems.list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-genie</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="win10-distrod" tabindex="-1"><a class="header-anchor" href="#win10-distrod"><span>win10 distrod</span></a></h3><p>……</p><h3 id="原生支持方案-wsl-systemd-需要window11" tabindex="-1"><a class="header-anchor" href="#原生支持方案-wsl-systemd-需要window11"><span>原生支持方案 (wsl systemd，需要window11)</span></a></h3><p>启用最新的wsl systemd特性前，可先阅读微软和Canonical提供的文档： https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/ https://ubuntu.com/blog/ubuntu-wsl-enable-systemd https://devblogs.microsoft.com/commandline/a-preview-of-wsl-in-the-microsoft-store-is-now-available</p><p>如果需要使用微软官方支持的systmed，在目前来说你需要满足这些前置条件：</p><ol><li><s>操作系统为windows 11</s> Update：Win10最新版也支持了</li><li>wsl 版本为 0.67.6 或以上（目前均为预览版本）</li></ol><p>先查看WSL版本，Windows命令行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wsl.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">适用于</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Windows</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 子系统分发版:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Ubuntu-20.04</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (默认)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wsl.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --distribution</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-20.04</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Welcome</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20.04.6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LTS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (GNU/Linux </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">5.10.16.3-microsoft-standard-WSL2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> x86_64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Documentation:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  https://help.ubuntu.com</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Management:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     https://landscape.canonical.com</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Support:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        https://ubuntu.com/advantage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> information</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jul</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 31</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 21:23:03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> load:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 Processes:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             96</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Usage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   14.5%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 250.98GB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Users</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usage:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 9%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  IPv4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> eth0:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 172.28.82.115</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Swap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usage:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">There</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zombie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Expanded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Security</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Maintenance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Applications</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enabled.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> can</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applied</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> immediately.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Apps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> receive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> additional</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> future</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> security</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updates.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">See</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://ubuntu.com/esm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">This</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shown</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> once</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> day.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> To</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/home/linczero/.hushlogin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查 是否启用了systemd。输出 systemd=true 表示成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;[boot]\\nsystemd=true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/wsl.conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[boot]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">systemd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 如果命令返回的是init说明systemd未启用，如果是systemd那么你的systemd已启用成功了</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --no-headers</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> comm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Trying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> instance,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> but</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> been</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> booted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33)]))}const p=i(l,[["render",t],["__file","wsl使用systemd.html.vue"]]),d=JSON.parse('{"path":"/MdNote_Public/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/WSL/wsl%E4%BD%BF%E7%94%A8systemd.html","title":"wsl使用systemd","lang":"zh-CN","frontmatter":{"description":"wsl使用systemd 资料 这里直接找官方的方案：WSL 现已提供 Systemd 支持！（。upDate 2023：后来又更新了，win10也支持了） 里面的细节比较多，觉得太干了就看国内博文：WSL 2 上启用微软官方支持的 systemd，倒不如说这篇反而更全面，更推荐 方案类型 本文首先会介绍如何安装和配置 wsl systemd，并用两个...","head":[["meta",{"property":"og:url","content":"https://LincZero.github.io/MdNote_Public/01.%20DesignAndDevelop/Virtual/%E8%99%9A%E6%8B%9F%E6%9C%BA/WSL/wsl%E4%BD%BF%E7%94%A8systemd.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"wsl使用systemd"}],["meta",{"property":"og:description","content":"wsl使用systemd 资料 这里直接找官方的方案：WSL 现已提供 Systemd 支持！（。upDate 2023：后来又更新了，win10也支持了） 里面的细节比较多，觉得太干了就看国内博文：WSL 2 上启用微软官方支持的 systemd，倒不如说这篇反而更全面，更推荐 方案类型 本文首先会介绍如何安装和配置 wsl systemd，并用两个..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"wsl使用systemd\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"wsl使用systemd","slug":"wsl使用systemd","link":"#wsl使用systemd","children":[{"level":2,"title":"资料","slug":"资料","link":"#资料","children":[]},{"level":2,"title":"方案类型","slug":"方案类型","link":"#方案类型","children":[{"level":3,"title":"三种方式的比较","slug":"三种方式的比较","link":"#三种方式的比较","children":[{"level":4,"title":"和genie的对比","slug":"和genie的对比","link":"#和genie的对比","children":[]},{"level":4,"title":"和distrod的对比","slug":"和distrod的对比","link":"#和distrod的对比","children":[]}]},{"level":3,"title":"win10 genie","slug":"win10-genie","link":"#win10-genie","children":[]},{"level":3,"title":"win10 distrod","slug":"win10-distrod","link":"#win10-distrod","children":[]},{"level":3,"title":"原生支持方案 (wsl systemd，需要window11)","slug":"原生支持方案-wsl-systemd-需要window11","link":"#原生支持方案-wsl-systemd-需要window11","children":[]}]}]}],"git":{},"readingTime":{"minutes":4.03,"words":1209},"filePathRelative":"MdNote_Public/01. DesignAndDevelop/Virtual/虚拟机/WSL/wsl使用systemd.md","excerpt":"\\n<h2>资料</h2>\\n<ul>\\n<li>这里直接找官方的方案：<a href=\\"https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">WSL 现已提供 Systemd 支持！</a>（<s>仅win11，原文没说这点，但评论和笔记下面的链接都会提到这点</s>。upDate 2023：后来又更新了，win10也支持了）</li>\\n<li>里面的细节比较多，觉得太干了就看国内博文：<a href=\\"https://www.cnblogs.com/wswind/p/wsl2-official-systemd.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">WSL 2 上启用微软官方支持的 systemd</a>，倒不如说这篇反而更全面，更推荐</li>\\n</ul>","autoDesc":true,"bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"MdNote_Public/01. DesignAndDevelop/Virtual/虚拟机/WSL/wsl使用systemd.md","value":{"title":"wsl使用systemd","path":"MdNote_Public/01. DesignAndDevelop/Virtual/虚拟机/WSL/wsl使用systemd.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{p as comp,d as data};
