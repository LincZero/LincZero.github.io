import{_ as s,c as a,e,o as t}from"./app-QbMAvOD7.js";const i={};function l(p,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="vuepress实践-github-and-gitlab-pages" tabindex="-1"><a class="header-anchor" href="#vuepress实践-github-and-gitlab-pages"><span>VuePress实践，GitHub and GitLab Pages</span></a></h1><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h2><p>项目参考个人网站项目：https://github.com/LincZero/LincZero.github.io</p><p>部署文档参考VuePress Hope主题部署文档：https://vuejs.press/zh/guide/deployment.html#gitlab-pages</p><h2 id="why-not-gitee" tabindex="-1"><a class="header-anchor" href="#why-not-gitee"><span>Why Not Gitee</span></a></h2><p>一开始仅使用 GitHub Page 进行部署，但后来发现部分国内网友无法访问。于是在国内平台又进行了部署，选择了 GitLab Page。</p><p>Q：Why not Gitee？</p><p>A：https://myzye.com/posts/bebaa7f/，我后来也去验证了这个问题，确实是关闭不可用了（2024-06-22）</p><h2 id="gitlab-import-github-repo-镜像仓库" tabindex="-1"><a class="header-anchor" href="#gitlab-import-github-repo-镜像仓库"><span>GitLab Import GitHub Repo（镜像仓库）</span></a></h2><h3 id="方法" tabindex="-1"><a class="header-anchor" href="#方法"><span>方法</span></a></h3><p>参考：</p><ul><li>https://www.cnblogs.com/kimiliucn/p/17693383.html</li><li>https://www.bilibili.com/video/BV13u411L7ga</li></ul><p>这个链接里教了：</p><ul><li>GitLab上自动推送到GitHub/Gitee</li><li>Gitee上自动拉取/推送到GitHub</li><li>（这里就有点奇怪了，Gitee上似乎能选择Push/Pull，但GitLab上似乎锁定了Pull，而无法设置Push方向）</li></ul><p>例如 ：</p><ul><li>GitLab同步到GitHub：GitLab上设置：项目 &gt; 左侧设置/仓库 &gt; 镜像仓库。但方向只能选推送，所以没用</li><li>Gitee自动拉取GitHub：GitLab上新建项目时选导入，然后在仓库 &gt; 管理 &gt; 仓库镜像管理 (限时开放) &gt; 然后配置。需要注意下GitHub的token需要开启一个admin:repo_hook的授权 (名字叫Webhooks，在倒数第二个)，还算简单</li></ul><h3 id="扩展-webhook" tabindex="-1"><a class="header-anchor" href="#扩展-webhook"><span>(扩展) Webhook</span></a></h3><p>这里有一个通用概念：Webhook</p><p>参考：https://www.redhat.com/zh/topics/automation/what-is-a-webhook</p><h4 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h4><p>Webhook 是一种基于 HTTP 的回调函数，可在 2 个应用编程接口（API）之间实现事件驱动的轻量级通信。许多 Web 应用都使用 Webhook 来接收来自其他应用的少量数据，但 Webhook 也可用于在 GitOps 环境中触发自动化工作流。</p><h4 id="web-api-vs-webhook" tabindex="-1"><a class="header-anchor" href="#web-api-vs-webhook"><span><code>Web API</code> vs <code>Webhook</code></span></a></h4><p>要设置 Webhook，客户端需向服务器 API 提供唯一的 URL，并指定其要了解的事件。设置 Webhook 后，客户端不再需要轮询服务器。发生特定的事件时，服务器会自动将相关的有效负载发送到客户端的 Webhook URL。</p><p>Webhook 通常被称为“反向 API” 或“推送 API”，因为通信责任落在了服务器而非客户端上。与客户端不断发送 HTTP 请求来请求数据，直至服务器作出响应的方式不同，服务器在数据可用时会立即向客户端发送一个 HTTP POST 请求。虽然有这些别名，但其实 Webhook 并非 API，二者可以结合使用。应用必须具有 API 才能使用 Webhook。</p><h3 id="gitlab-无法-pull-问题的踩坑" tabindex="-1"><a class="header-anchor" href="#gitlab-无法-pull-问题的踩坑"><span>GitLab 无法 Pull 问题的踩坑</span></a></h3><blockquote><ol><li>Gitee的仓库镜像能支持自动从GitHub中Push和Pull，但 Gitee Page 现在已经暂停服务了</li><li>GitLab的Page似乎还能用，但其镜像功能似乎只能Push，无法切换Pull</li><li>所以现在我得Gitee自动Pull Github再自动Push GitLab，然后将页面同步到GitLab Page上？好傻啊，不想这么搞</li></ol><p>不一定要顺着上面的思路搞。本质问题是：GitHub Page我已经部署过了，但想多部署一个不用魔法上网的环境，如果各位大佬有其他方法也是可以</p></blockquote><p>后来根据群友建议，放弃了，换用了 CloudFlare Pages 方案且成功了。详见 CloudFlare Pages 相关笔记</p><h2 id="yml" tabindex="-1"><a class="header-anchor" href="#yml"><span>YML</span></a></h2><h3 id="gitee-yml-page暂停服务-废弃" tabindex="-1"><a class="header-anchor" href="#gitee-yml-page暂停服务-废弃"><span>Gitee yml（Page暂停服务，废弃）</span></a></h3><p>（Page暂停服务，废弃）</p><h3 id="github-yml" tabindex="-1"><a class="header-anchor" href="#github-yml"><span>GitHub yml</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code>
<span class="token key atrule">name</span><span class="token punctuation">:</span> 部署文档

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token comment"># 确保这是你正在使用的分支名称</span>
      <span class="token punctuation">-</span> main
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">permissions</span><span class="token punctuation">:</span>
  <span class="token key atrule">contents</span><span class="token punctuation">:</span> write

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy-gh-pages</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token comment"># 如果你文档需要 Git 子模块，取消注释下一行</span>
          <span class="token key atrule">submodules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">token</span><span class="token punctuation">:</span> <span class="token string">&#39;\${{ secrets.VUEPRESS }}&#39;</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout <span class="token punctuation">-</span> 更新子模块到最新
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          git submodule foreach git pull origin main</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 安装 pnpm
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">run_install</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">8</span>


      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 设置 Node.js
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">20</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> pnpm


      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建文档
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">NODE_OPTIONS</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>max_old_space_size=8192
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
          pnpm run docs<span class="token punctuation">:</span>build
          <span class="token punctuation">&gt;</span> src/.vuepress/dist/.nojekyll

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 部署文档
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 这是文档部署到的分支名称</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token key atrule">folder</span><span class="token punctuation">:</span> src/.vuepress/dist

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gitlab-yml-未实验" tabindex="-1"><a class="header-anchor" href="#gitlab-yml-未实验"><span>GitLab Yml（未实验）</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># 选择你要使用的 docker 镜像</span>
<span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>18<span class="token punctuation">-</span>buster

<span class="token key atrule">pages</span><span class="token punctuation">:</span>
  <span class="token comment"># 每当 push 到 main 分支时触发部署</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> main

  <span class="token comment"># 缓存 node_modules</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">key</span><span class="token punctuation">:</span>
      <span class="token key atrule">files</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pnpm<span class="token punctuation">-</span>lock.yaml
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .pnpm<span class="token punctuation">-</span>store

  <span class="token comment"># 安装 pnpm</span>
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> curl <span class="token punctuation">-</span>fsSL https<span class="token punctuation">:</span>//get.pnpm.io/install.sh <span class="token punctuation">|</span> sh <span class="token punctuation">-</span>
    <span class="token punctuation">-</span> pnpm config set store<span class="token punctuation">-</span>dir .pnpm<span class="token punctuation">-</span>store

  <span class="token comment"># 安装依赖并运行构建脚本</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> pnpm install <span class="token punctuation">-</span><span class="token punctuation">-</span>frozen<span class="token punctuation">-</span>lockfile
    <span class="token punctuation">-</span> pnpm docs<span class="token punctuation">:</span>build <span class="token punctuation">-</span><span class="token punctuation">-</span>dest public

  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> public

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,34)]))}const u=s(i,[["render",l],["__file","VuePress实践，GitHub and GitLab Pages.html.vue"]]),c=JSON.parse('{"path":"/MdNote_Public/01.%20DesignAndDevelop/Develop/03.%20Tools/02.%20%E7%AE%A1%E7%90%86%E5%B1%82/04.%20%E9%83%A8%E7%BD%B2%E7%AE%A1%E7%90%86/Page/VuePress%E5%AE%9E%E8%B7%B5%EF%BC%8CGitHub%20and%20GitLab%20Pages.html","title":"VuePress实践，GitHub and GitLab Pages","lang":"zh-CN","frontmatter":{"description":"VuePress实践，GitHub and GitLab Pages Reference 项目参考个人网站项目：https://github.com/LincZero/LincZero.github.io 部署文档参考VuePress Hope主题部署文档：https://vuejs.press/zh/guide/deployment.html#git...","head":[["meta",{"property":"og:url","content":"https://LincZero.github.io/MdNote_Public/01.%20DesignAndDevelop/Develop/03.%20Tools/02.%20%E7%AE%A1%E7%90%86%E5%B1%82/04.%20%E9%83%A8%E7%BD%B2%E7%AE%A1%E7%90%86/Page/VuePress%E5%AE%9E%E8%B7%B5%EF%BC%8CGitHub%20and%20GitLab%20Pages.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"VuePress实践，GitHub and GitLab Pages"}],["meta",{"property":"og:description","content":"VuePress实践，GitHub and GitLab Pages Reference 项目参考个人网站项目：https://github.com/LincZero/LincZero.github.io 部署文档参考VuePress Hope主题部署文档：https://vuejs.press/zh/guide/deployment.html#git..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"VuePress实践，GitHub and GitLab Pages\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"VuePress实践，GitHub and GitLab Pages","slug":"vuepress实践-github-and-gitlab-pages","link":"#vuepress实践-github-and-gitlab-pages","children":[{"level":2,"title":"Reference","slug":"reference","link":"#reference","children":[]},{"level":2,"title":"Why Not Gitee","slug":"why-not-gitee","link":"#why-not-gitee","children":[]},{"level":2,"title":"GitLab Import GitHub Repo（镜像仓库）","slug":"gitlab-import-github-repo-镜像仓库","link":"#gitlab-import-github-repo-镜像仓库","children":[{"level":3,"title":"方法","slug":"方法","link":"#方法","children":[]},{"level":3,"title":"(扩展) Webhook","slug":"扩展-webhook","link":"#扩展-webhook","children":[{"level":4,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":4,"title":"Web API vs Webhook","slug":"web-api-vs-webhook","link":"#web-api-vs-webhook","children":[]}]},{"level":3,"title":"GitLab 无法 Pull 问题的踩坑","slug":"gitlab-无法-pull-问题的踩坑","link":"#gitlab-无法-pull-问题的踩坑","children":[]}]},{"level":2,"title":"YML","slug":"yml","link":"#yml","children":[{"level":3,"title":"Gitee yml（Page暂停服务，废弃）","slug":"gitee-yml-page暂停服务-废弃","link":"#gitee-yml-page暂停服务-废弃","children":[]},{"level":3,"title":"GitHub yml","slug":"github-yml","link":"#github-yml","children":[]},{"level":3,"title":"GitLab Yml（未实验）","slug":"gitlab-yml-未实验","link":"#gitlab-yml-未实验","children":[]}]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":3.48,"words":1043},"filePathRelative":"MdNote_Public/01. DesignAndDevelop/Develop/03. Tools/02. 管理层/04. 部署管理/Page/VuePress实践，GitHub and GitLab Pages.md","excerpt":"\\n<h2>Reference</h2>\\n<p>项目参考个人网站项目：https://github.com/LincZero/LincZero.github.io</p>\\n<p>部署文档参考VuePress Hope主题部署文档：https://vuejs.press/zh/guide/deployment.html#gitlab-pages</p>\\n<h2>Why Not Gitee</h2>\\n<p>一开始仅使用 GitHub Page 进行部署，但后来发现部分国内网友无法访问。于是在国内平台又进行了部署，选择了 GitLab Page。</p>\\n<p>Q：Why not Gitee？</p>","autoDesc":true}');export{u as comp,c as data};
