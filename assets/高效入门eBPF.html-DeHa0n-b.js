import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as a,a as t}from"./app-CyJMR3JQ.js";const n="/assets/image-20230719210702569-BzoddVwO.png",p="/assets/image-20230719212107531-D1Hmf_O5.png",g="/assets/image-20230719213641786-Qcnlwrt1.png",s="/assets/image-20230719214158179-B1HYpEY5.png",l="/assets/image-20230719214405537-BEgv7cgf.png",r="/assets/image-20230719214518980-B-79VmKj.png",f="/assets/image-20230719214613503-C_yZEk2b.png",o="/assets/image-20230719215846646-Btf_Bjc8.png",c="/assets/image-20230719215935022-B6R3oxJo.png",d="/assets/image-20230719220548910-Lasal2Sn.png",h="/assets/image-20230719220755695-CatU8Sed.png",b="/assets/image-20230719223631399-BTLgIqNM.png",m="/assets/image-20230719224815723-DCXO_XDb.png",B="/assets/image-20230720214133555-Bd0g5iW5.png",u="/assets/image-20230720214819600-BkaIBLTi.png",_="/assets/image-20230720221249165-43ZU8i8w.png",E="/assets/image-20230720223021407-DyerylUq.png",F="/assets/image-20230720223455134-CZuhd77z.png",P="/assets/image-20230720223658848-CECMyxGO.png",x="/assets/image-20230720214532028-eCvYRfjt.png",y="/assets/image-20230720214700053-PylT8Y3K.png",k="/assets/image-20230720224025836-kbGMPvqg.png",A="/assets/image-20230720224152260-B-6dCD9U.png",v="/assets/image-20230720224303473-DOJzsX4q.png",z="/assets/image-20230720224432524-qXcN6hLh.png",D="/assets/image-20230720224704333-DCNWnaIR.png",C="/assets/image-20230720224820134-CP9oGUun.png",w="/assets/image-20230720224944831-C13qglGD.png",L="/assets/image-20230720225402882-DmLRHI3b.png",N="/assets/image-20230720225535360-B0arSF1n.png",T="/assets/image-20230720225815565-CtgPSMO5.png",M="/assets/image-20230720230918962-B4DX-TZR.png",S="/assets/image-20230720231128842-CK_kfa1l.png",O="/assets/image-20230720231339419-6greMDc_.png",G="/assets/image-20230720231714042-ixOyadlT.png",X="/assets/image-20230720231728706-D6-9nFY-.png",q="/assets/image-20230720232959712-CKKqyDG3.png",R={},Z=t('<h1 id="ebpf" tabindex="-1"><a class="header-anchor" href="#ebpf"><span>eBPF</span></a></h1><h1 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h1><h1 id="高速入门ebpf" tabindex="-1"><a class="header-anchor" href="#高速入门ebpf"><span>高速入门eBPF</span></a></h1><p>视频：https://www.bilibili.com/video/BV1LX4y157Gp</p><h2 id="技术介绍" tabindex="-1"><a class="header-anchor" href="#技术介绍"><span>技术介绍</span></a></h2><h3 id="来源" tabindex="-1"><a class="header-anchor" href="#来源"><span>来源</span></a></h3><p>1992 年论文：“The BSD pakcet filter: A New architecture for user-level packet capture”，即《BSD数据包过滤器：一种用于用户级数据包捕获的新体系结构》</p><p>最初，BPF是在BSD内核实现的，后来，由于其出色的设计思想，其他操作系统也将欺引入，包括Linux</p><h3 id="bpf的实现有哪些" tabindex="-1"><a class="header-anchor" href="#bpf的实现有哪些"><span>BPF的实现有哪些</span></a></h3><figure><img src="'+n+'" alt="image-20230719210702569" tabindex="0" loading="lazy"><figcaption>image-20230719210702569</figcaption></figure><h3 id="技术架构图" tabindex="-1"><a class="header-anchor" href="#技术架构图"><span>技术架构图</span></a></h3><figure><img src="'+p+'" alt="image-20230719212107531" tabindex="0" loading="lazy"><figcaption>image-20230719212107531</figcaption></figure><h3 id="bpf运行时结构" tabindex="-1"><a class="header-anchor" href="#bpf运行时结构"><span>BPF运行时结构</span></a></h3><figure><img src="'+g+'" alt="image-20230719213641786" tabindex="0" loading="lazy"><figcaption>image-20230719213641786</figcaption></figure><h3 id="ebpf相较于bpf的扩展内容" tabindex="-1"><a class="header-anchor" href="#ebpf相较于bpf的扩展内容"><span>eBPF相较于BPF的扩展内容</span></a></h3><figure><img src="'+s+'" alt="image-20230719214158179" tabindex="0" loading="lazy"><figcaption>image-20230719214158179</figcaption></figure><figure><img src="'+l+'" alt="image-20230719214405537" tabindex="0" loading="lazy"><figcaption>image-20230719214405537</figcaption></figure><h2 id="bpf-虚拟机与执行" tabindex="-1"><a class="header-anchor" href="#bpf-虚拟机与执行"><span>BPF 虚拟机与执行</span></a></h2><h3 id="编译、指令集" tabindex="-1"><a class="header-anchor" href="#编译、指令集"><span>编译、指令集</span></a></h3><h4 id="bpf不仅是一个指令集-还提供了一些工具" tabindex="-1"><a class="header-anchor" href="#bpf不仅是一个指令集-还提供了一些工具"><span>BPF不仅是一个指令集，还提供了一些工具</span></a></h4><figure><img src="'+r+'" alt="image-20230719214518980" tabindex="0" loading="lazy"><figcaption>image-20230719214518980</figcaption></figure><h4 id="bpf指令集" tabindex="-1"><a class="header-anchor" href="#bpf指令集"><span>BPF指令集</span></a></h4><figure><img src="'+f+'" alt="image-20230719214613503" tabindex="0" loading="lazy"><figcaption>image-20230719214613503</figcaption></figure><p>字节码对虚拟机，相当于,机器码对X86或arm</p><h4 id="bpf虚拟机与bpf指令集" tabindex="-1"><a class="header-anchor" href="#bpf虚拟机与bpf指令集"><span>BPF虚拟机与BPF指令集</span></a></h4><figure><img src="'+o+'" alt="image-20230719215846646" tabindex="0" loading="lazy"><figcaption>image-20230719215846646</figcaption></figure><h4 id="bpf指令集与bpf字节码" tabindex="-1"><a class="header-anchor" href="#bpf指令集与bpf字节码"><span>BPF指令集与BPF字节码</span></a></h4><figure><img src="'+c+'" alt="image-20230719215935022" tabindex="0" loading="lazy"><figcaption>image-20230719215935022</figcaption></figure><figure><img src="'+d+'" alt="image-20230719220548910" tabindex="0" loading="lazy"><figcaption>image-20230719220548910</figcaption></figure><figure><img src="'+h+'" alt="image-20230719220755695" tabindex="0" loading="lazy"><figcaption>image-20230719220755695</figcaption></figure><h4 id="ebpf指令格式" tabindex="-1"><a class="header-anchor" href="#ebpf指令格式"><span>eBPF指令格式</span></a></h4><figure><img src="'+b+'" alt="image-20230719223631399" tabindex="0" loading="lazy"><figcaption>image-20230719223631399</figcaption></figure><h4 id="bpf虚拟机-内核解释器" tabindex="-1"><a class="header-anchor" href="#bpf虚拟机-内核解释器"><span>BPF虚拟机（内核解释器）</span></a></h4><figure><img src="'+m+'" alt="image-20230719224815723" tabindex="0" loading="lazy"><figcaption>image-20230719224815723</figcaption></figure><h3 id="编译、加载、运行" tabindex="-1"><a class="header-anchor" href="#编译、加载、运行"><span>编译、加载、运行</span></a></h3><figure><img src="'+B+'" alt="image-20230720214133555" tabindex="0" loading="lazy"><figcaption>image-20230720214133555</figcaption></figure><p>注意这里的 <code>BPF_PROG_LOAD型bpf()系统调用</code>，后面要考</p><h3 id="用户空间的bpf程序如何载入内核" tabindex="-1"><a class="header-anchor" href="#用户空间的bpf程序如何载入内核"><span>用户空间的BPF程序如何载入内核</span></a></h3><figure><img src="'+u+'" alt="image-20230720214819600" tabindex="0" loading="lazy"><figcaption>image-20230720214819600</figcaption></figure><figure><img src="'+_+'" alt="image-20230720221249165" tabindex="0" loading="lazy"><figcaption>image-20230720221249165</figcaption></figure><figure><img src="'+E+'" alt="image-20230720223021407" tabindex="0" loading="lazy"><figcaption>image-20230720223021407</figcaption></figure><figure><img src="'+F+'" alt="image-20230720223455134" tabindex="0" loading="lazy"><figcaption>image-20230720223455134</figcaption></figure><h3 id="bpf虚拟机执行的时机" tabindex="-1"><a class="header-anchor" href="#bpf虚拟机执行的时机"><span>BPF虚拟机执行的时机</span></a></h3><figure><img src="'+P+'" alt="image-20230720223658848" tabindex="0" loading="lazy"><figcaption>image-20230720223658848</figcaption></figure><h2 id="bpf-系统调用-bpf" tabindex="-1"><a class="header-anchor" href="#bpf-系统调用-bpf"><span>BPF 系统调用：bpf()</span></a></h2><figure><img src="'+x+'" alt="image-20230720214532028" tabindex="0" loading="lazy"><figcaption>image-20230720214532028</figcaption></figure><h2 id="bpf-描述符-bpf-prog-、bpf程序类型、bpf存储类型" tabindex="-1"><a class="header-anchor" href="#bpf-描述符-bpf-prog-、bpf程序类型、bpf存储类型"><span>BPF 描述符 (bpf_prog)、BPF程序类型、BPF存储类型</span></a></h2><h3 id="bpf描述符-bpf-prog" tabindex="-1"><a class="header-anchor" href="#bpf描述符-bpf-prog"><span>BPF描述符（bpf_prog）</span></a></h3><figure><img src="'+y+'" alt="image-20230720214700053" tabindex="0" loading="lazy"><figcaption>image-20230720214700053</figcaption></figure><h3 id="bpf程序类型-hook点" tabindex="-1"><a class="header-anchor" href="#bpf程序类型-hook点"><span>BPF程序类型（Hook点）</span></a></h3><figure><img src="'+k+'" alt="image-20230720224025836" tabindex="0" loading="lazy"><figcaption>image-20230720224025836</figcaption></figure><h3 id="bpf存储类型-map" tabindex="-1"><a class="header-anchor" href="#bpf存储类型-map"><span>BPF存储类型（Map）</span></a></h3><figure><img src="'+A+'" alt="image-20230720224152260" tabindex="0" loading="lazy"><figcaption>image-20230720224152260</figcaption></figure><h2 id="bpf辅助函数" tabindex="-1"><a class="header-anchor" href="#bpf辅助函数"><span>BPF辅助函数</span></a></h2><figure><img src="'+v+'" alt="image-20230720224303473" tabindex="0" loading="lazy"><figcaption>image-20230720224303473</figcaption></figure><h2 id="如何使用bpf-bpf编程" tabindex="-1"><a class="header-anchor" href="#如何使用bpf-bpf编程"><span>如何使用BPF：BPF编程</span></a></h2><h3 id="三种方式" tabindex="-1"><a class="header-anchor" href="#三种方式"><span>三种方式</span></a></h3><figure><img src="'+z+'" alt="image-20230720224432524" tabindex="0" loading="lazy"><figcaption>image-20230720224432524</figcaption></figure><h3 id="bpf指令集编程" tabindex="-1"><a class="header-anchor" href="#bpf指令集编程"><span>BPF指令集编程</span></a></h3><figure><img src="'+D+'" alt="image-20230720224704333" tabindex="0" loading="lazy"><figcaption>image-20230720224704333</figcaption></figure><h3 id="bpf-c编程" tabindex="-1"><a class="header-anchor" href="#bpf-c编程"><span>BPF C编程</span></a></h3><figure><img src="'+C+'" alt="image-20230720224820134" tabindex="0" loading="lazy"><figcaption>image-20230720224820134</figcaption></figure><h3 id="bpf前端编程-bcc" tabindex="-1"><a class="header-anchor" href="#bpf前端编程-bcc"><span>BPF前端编程 - BCC</span></a></h3><figure><img src="'+w+'" alt="image-20230720224944831" tabindex="0" loading="lazy"><figcaption>image-20230720224944831</figcaption></figure><figure><img src="'+L+'" alt="image-20230720225402882" tabindex="0" loading="lazy"><figcaption>image-20230720225402882</figcaption></figure><h2 id="bpf学习资料" tabindex="-1"><a class="header-anchor" href="#bpf学习资料"><span>BPF学习资料</span></a></h2><figure><img src="'+N+'" alt="image-20230720225535360" tabindex="0" loading="lazy"><figcaption>image-20230720225535360</figcaption></figure><h1 id="lmp" tabindex="-1"><a class="header-anchor" href="#lmp"><span>LMP</span></a></h1><figure><img src="'+T+'" alt="image-20230720225815565" tabindex="0" loading="lazy"><figcaption>image-20230720225815565</figcaption></figure><figure><img src="'+M+'" alt="image-20230720230918962" tabindex="0" loading="lazy"><figcaption>image-20230720230918962</figcaption></figure><figure><img src="'+S+'" alt="image-20230720231128842" tabindex="0" loading="lazy"><figcaption>image-20230720231128842</figcaption></figure><figure><img src="'+O+'" alt="image-20230720231339419" tabindex="0" loading="lazy"><figcaption>image-20230720231339419</figcaption></figure><figure><img src="'+G+'" alt="image-20230720231714042" tabindex="0" loading="lazy"><figcaption>image-20230720231714042</figcaption></figure><figure><img src="'+X+'" alt="image-20230720231728706" tabindex="0" loading="lazy"><figcaption>image-20230720231728706</figcaption></figure><figure><img src="'+q+'" alt="image-20230720232959712" tabindex="0" loading="lazy"><figcaption>image-20230720232959712</figcaption></figure>',75),V=[Z];function H(K,U){return e(),a("div",null,V)}const I=i(R,[["render",H],["__file","高效入门eBPF.html.vue"]]),J=JSON.parse('{"path":"/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E7%BD%91%E7%BB%9C%E5%BA%93/%E6%97%A0%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%BA%93/eBPF/%E9%AB%98%E6%95%88%E5%85%A5%E9%97%A8eBPF.html","title":"eBPF","lang":"zh-CN","frontmatter":{"description":"eBPF 目录 高速入门eBPF 视频：https://www.bilibili.com/video/BV1LX4y157Gp 技术介绍 来源 1992 年论文：“The BSD pakcet filter: A New architecture for user-level packet capture”，即《BSD数据包过滤器：一种用于用户级数据包...","head":[["meta",{"property":"og:url","content":"http://192.168.0.101:8080/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E7%BD%91%E7%BB%9C%E5%BA%93/%E6%97%A0%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%BA%93/eBPF/%E9%AB%98%E6%95%88%E5%85%A5%E9%97%A8eBPF.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"eBPF"}],["meta",{"property":"og:description","content":"eBPF 目录 高速入门eBPF 视频：https://www.bilibili.com/video/BV1LX4y157Gp 技术介绍 来源 1992 年论文：“The BSD pakcet filter: A New architecture for user-level packet capture”，即《BSD数据包过滤器：一种用于用户级数据包..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"eBPF\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"eBPF","slug":"ebpf","link":"#ebpf","children":[]},{"level":1,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":1,"title":"高速入门eBPF","slug":"高速入门ebpf","link":"#高速入门ebpf","children":[{"level":2,"title":"技术介绍","slug":"技术介绍","link":"#技术介绍","children":[{"level":3,"title":"来源","slug":"来源","link":"#来源","children":[]},{"level":3,"title":"BPF的实现有哪些","slug":"bpf的实现有哪些","link":"#bpf的实现有哪些","children":[]},{"level":3,"title":"技术架构图","slug":"技术架构图","link":"#技术架构图","children":[]},{"level":3,"title":"BPF运行时结构","slug":"bpf运行时结构","link":"#bpf运行时结构","children":[]},{"level":3,"title":"eBPF相较于BPF的扩展内容","slug":"ebpf相较于bpf的扩展内容","link":"#ebpf相较于bpf的扩展内容","children":[]}]},{"level":2,"title":"BPF 虚拟机与执行","slug":"bpf-虚拟机与执行","link":"#bpf-虚拟机与执行","children":[{"level":3,"title":"编译、指令集","slug":"编译、指令集","link":"#编译、指令集","children":[{"level":4,"title":"BPF不仅是一个指令集，还提供了一些工具","slug":"bpf不仅是一个指令集-还提供了一些工具","link":"#bpf不仅是一个指令集-还提供了一些工具","children":[]},{"level":4,"title":"BPF指令集","slug":"bpf指令集","link":"#bpf指令集","children":[]},{"level":4,"title":"BPF虚拟机与BPF指令集","slug":"bpf虚拟机与bpf指令集","link":"#bpf虚拟机与bpf指令集","children":[]},{"level":4,"title":"BPF指令集与BPF字节码","slug":"bpf指令集与bpf字节码","link":"#bpf指令集与bpf字节码","children":[]},{"level":4,"title":"eBPF指令格式","slug":"ebpf指令格式","link":"#ebpf指令格式","children":[]},{"level":4,"title":"BPF虚拟机（内核解释器）","slug":"bpf虚拟机-内核解释器","link":"#bpf虚拟机-内核解释器","children":[]}]},{"level":3,"title":"编译、加载、运行","slug":"编译、加载、运行","link":"#编译、加载、运行","children":[]},{"level":3,"title":"用户空间的BPF程序如何载入内核","slug":"用户空间的bpf程序如何载入内核","link":"#用户空间的bpf程序如何载入内核","children":[]},{"level":3,"title":"BPF虚拟机执行的时机","slug":"bpf虚拟机执行的时机","link":"#bpf虚拟机执行的时机","children":[]}]},{"level":2,"title":"BPF 系统调用：bpf()","slug":"bpf-系统调用-bpf","link":"#bpf-系统调用-bpf","children":[]},{"level":2,"title":"BPF 描述符 (bpf_prog)、BPF程序类型、BPF存储类型","slug":"bpf-描述符-bpf-prog-、bpf程序类型、bpf存储类型","link":"#bpf-描述符-bpf-prog-、bpf程序类型、bpf存储类型","children":[{"level":3,"title":"BPF描述符（bpf_prog）","slug":"bpf描述符-bpf-prog","link":"#bpf描述符-bpf-prog","children":[]},{"level":3,"title":"BPF程序类型（Hook点）","slug":"bpf程序类型-hook点","link":"#bpf程序类型-hook点","children":[]},{"level":3,"title":"BPF存储类型（Map）","slug":"bpf存储类型-map","link":"#bpf存储类型-map","children":[]}]},{"level":2,"title":"BPF辅助函数","slug":"bpf辅助函数","link":"#bpf辅助函数","children":[]},{"level":2,"title":"如何使用BPF：BPF编程","slug":"如何使用bpf-bpf编程","link":"#如何使用bpf-bpf编程","children":[{"level":3,"title":"三种方式","slug":"三种方式","link":"#三种方式","children":[]},{"level":3,"title":"BPF指令集编程","slug":"bpf指令集编程","link":"#bpf指令集编程","children":[]},{"level":3,"title":"BPF C编程","slug":"bpf-c编程","link":"#bpf-c编程","children":[]},{"level":3,"title":"BPF前端编程 - BCC","slug":"bpf前端编程-bcc","link":"#bpf前端编程-bcc","children":[]}]},{"level":2,"title":"BPF学习资料","slug":"bpf学习资料","link":"#bpf学习资料","children":[]}]},{"level":1,"title":"LMP","slug":"lmp","link":"#lmp","children":[]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":2.09,"words":626},"filePathRelative":"MdNote_Public/01. 设计开发与数据生产/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/网络库/无协议栈库/eBPF/高效入门eBPF.md","autoDesc":true}');export{I as comp,J as data};
