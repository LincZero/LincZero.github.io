import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as n,e}from"./app-yixEWCFr.js";const l={},t=e(`<h1 id="dpdk安装" tabindex="-1"><a class="header-anchor" href="#dpdk安装"><span>DPDK安装</span></a></h1><h2 id="源码安装" tabindex="-1"><a class="header-anchor" href="#源码安装"><span>源码安装</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">RTE_SDK</span><span class="token operator">=</span><span class="token string">&quot;/usr/src/dpdk&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">DPDK_VERSION</span><span class="token operator">=</span><span class="token string">&quot;2.2.0&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">RTE_TARGET</span><span class="token operator">=</span><span class="token string">&quot;x86_64-native-linuxapp-gcc&quot;</span>

<span class="token comment">######################## ubuntu ######################################</span>
<span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">vim</span> gcc-multilib libfuse-dev linux-source libssl-dev llvm-dev python autoconf libtool libpciaccess-dev <span class="token function">make</span> libcunit1-dev libaio-dev

<span class="token comment">######################## centos ######################################</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">git</span> cmake gcc autoconf automake device-mapper-devel <span class="token punctuation">\\</span>
   sqlite-devel pcre-devel libsepol-devel libselinux-devel <span class="token punctuation">\\</span>
   automake autoconf gcc <span class="token function">make</span> glibc-devel glibc-devel.i686 kernel-devel <span class="token punctuation">\\</span>
   fuse-devel pciutils libtool openssl-devel libpciaccess-devel CUnit-devel libaio-devel
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /lib/modules/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">)</span></span>
<span class="token function">ln</span> <span class="token parameter variable">-sf</span> /usr/src/kernels/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">)</span></span> /lib/modules/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">)</span></span>/build

<span class="token comment"># download dpdk</span>
<span class="token function">curl</span> <span class="token parameter variable">-sSL</span> http://dpdk.org/browse/dpdk/snapshot/dpdk-<span class="token variable">\${DPDK_VERSION}</span>.tar.gz <span class="token operator">|</span> <span class="token function">tar</span> <span class="token parameter variable">-xz</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mv</span> dpdk-<span class="token variable">\${DPDK_VERSION}</span> <span class="token variable">\${RTE_SDK}</span>

<span class="token comment"># install dpdk</span>
<span class="token builtin class-name">cd</span> <span class="token variable">\${RTE_SDK}</span>
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;s,(CONFIG_RTE_BUILD_COMBINE_LIBS=).*,\\1y,&#39;</span> config/common_linuxapp
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;s,(CONFIG_RTE_LIBRTE_VHOST=).*,\\1y,&#39;</span> config/common_linuxapp
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;s,(CONFIG_RTE_LIBRTE_VHOST_USER=).*,\\1n,&#39;</span> config/common_linuxapp
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;/CONFIG_RTE_LIBNAME/a CONFIG_RTE_BUILD_FPIC=y&#39;</span> config/common_linuxapp
<span class="token function">make</span> config <span class="token assign-left variable">CC</span><span class="token operator">=</span>gcc <span class="token assign-left variable">T</span><span class="token operator">=</span><span class="token variable">$RTE_TARGET</span>
<span class="token function">make</span> <span class="token parameter variable">-j</span> <span class="token variable"><span class="token variable">\`</span>nproc<span class="token variable">\`</span></span> <span class="token assign-left variable">RTE_KERNELDIR</span><span class="token operator">=</span>/lib/modules/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span><span class="token variable">)</span></span>/build
<span class="token function">make</span> <span class="token function">install</span>
depmod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置<code>Hugepages</code>: 添加<code>&quot;default_hugepagesz=1G hugepagesz=1G hugepages=4&quot;</code>到<code>/etc/grub/default</code>的<code>GRUB_CMDLINE_LINUX</code>，并执行（测试环境可以配置<code>GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rhgb quiet transparent_hugepage=never default_hugepagesz=2MB hugepagesz=2MB hugepages=512&quot;</code>）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>grub2-mkconfig <span class="token parameter variable">-o</span> /boot/grub2/grub.cfg
systemctl <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>加载内核模块</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>modprobe uio
insmod kmod/igb_uio.ko
./tools/dpdk-devbind.py <span class="token parameter variable">--bind</span><span class="token operator">=</span>igb_uio <span class="token operator">&lt;</span>Device BDF<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="rehl-7-2" tabindex="-1"><a class="header-anchor" href="#rehl-7-2"><span>REHL 7.2</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>subscription-manager repos <span class="token parameter variable">--enable</span> rhel-7-server-extras-rpms
yum <span class="token function">install</span> dpdk dpdk-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ubuntu-15" tabindex="-1"><a class="header-anchor" href="#ubuntu-15"><span>Ubuntu 15+</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">apt-get</span> <span class="token function">install</span> dpdk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,11),i=[t];function p(o,c){return s(),n("div",null,i)}const u=a(l,[["render",p],["__file","02. 安装.html.vue"]]),v=JSON.parse('{"path":"/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E3%80%8Asdn-handbook%E3%80%8B/05.%20DPDK/02.%20%E5%AE%89%E8%A3%85.html","title":"DPDK安装","lang":"zh-CN","frontmatter":{"description":"DPDK安装 源码安装 配置Hugepages: 添加\\"default_hugepagesz=1G hugepagesz=1G hugepages=4\\"到/etc/grub/default的GRUB_CMDLINE_LINUX，并执行（测试环境可以配置GRUB_CMDLINE_LINUX=\\"crashkernel=auto rhgb quiet tra...","head":[["meta",{"property":"og:url","content":"http://192.168.0.101:8080/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/02.%20Theory/Computer/03.%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%20-%20%E4%B8%93%E9%A2%98%E6%88%96%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%97%E5%85%B8%E7%89%88/%E4%B8%8B%E5%B1%82%E7%9B%B8%E5%85%B3/Network/%E3%80%8Asdn-handbook%E3%80%8B/05.%20DPDK/02.%20%E5%AE%89%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"DPDK安装"}],["meta",{"property":"og:description","content":"DPDK安装 源码安装 配置Hugepages: 添加\\"default_hugepagesz=1G hugepagesz=1G hugepages=4\\"到/etc/grub/default的GRUB_CMDLINE_LINUX，并执行（测试环境可以配置GRUB_CMDLINE_LINUX=\\"crashkernel=auto rhgb quiet tra..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"DPDK安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"DPDK安装","slug":"dpdk安装","link":"#dpdk安装","children":[{"level":2,"title":"源码安装","slug":"源码安装","link":"#源码安装","children":[]},{"level":2,"title":"REHL 7.2","slug":"rehl-7-2","link":"#rehl-7-2","children":[]},{"level":2,"title":"Ubuntu 15+","slug":"ubuntu-15","link":"#ubuntu-15","children":[]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":0.84,"words":251},"filePathRelative":"MdNote_Public/01. 设计开发与数据生产/Develop/02. Theory/Computer/03. 计算机系统 - 专题或子系统的字典版/下层相关/Network/《sdn-handbook》/05. DPDK/02. 安装.md","autoDesc":true}');export{u as comp,v as data};
