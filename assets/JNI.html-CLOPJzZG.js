import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as c,c as i,a as n,b as s,d as p,e as t}from"./app-CdBXVQbh.js";const l={},u=t('<h1 id="jni" tabindex="-1"><a class="header-anchor" href="#jni"><span>JNI</span></a></h1><h1 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h1><h1 id="jni-java-native-interface-java原生接口" tabindex="-1"><a class="header-anchor" href="#jni-java-native-interface-java原生接口"><span>JNI (Java Native Interface，Java原生接口)</span></a></h1><p>是NDK (Native Develop Kit，原生开发组件) 里的一个接口</p><p>参考文档：</p><ul><li>https://developer.android.com/training/articles/perf-jni?hl=zh-cn</li></ul><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>JNI 是指 Java 原生接口。它定义了 Android 从受管理代码（使用 Java 或 Kotlin 编程语言编写）编译的字节码与原生代码（使用 C/C++ 编写）互动的方式。JNI 不依赖于供应商，支持从动态共享库加载代码，虽然有时较为繁琐，但效率尚可。</p><h2 id="参数通信" tabindex="-1"><a class="header-anchor" href="#参数通信"><span>参数通信</span></a></h2>',9),r={href:"https://blog.csdn.net/hj_key/article/details/106102841",target:"_blank",rel:"noopener noreferrer"},k=n("h3",{id:"c-调用-java-方法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#c-调用-java-方法"},[n("span",null,"C 调用 Java 方法")])],-1),d={href:"https://blog.csdn.net/hj_key/article/details/106102841",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,"大体分两种：",-1),m=n("p",null,"反射找方法",-1),b={href:"https://so.csdn.net/so/search?q=%E5%8F%8D%E5%B0%84&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"},h=n("p",null,"该方法有个弊端，只能在当前线程中使用，项目中用处实用性太小。",-1),y=n("li",null,[n("p",null,"全局变量存Java方法（本文主推方法）"),n("p",null,[s("在activity 中先启动一个JNI 调用，将 activity 当前类 保存到C中存为 "),n("strong",null,"全局变量"),s("。 然后在需要使用的 C 文件中，使用这个全局变量找到activity的类，和方法，然后进行调用。")])],-1),g=t(`<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// activity 中声明本地方法   </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">native</span> <span class="token class-name">String</span> <span class="token function">listenOrientation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// C 中需要调用的Java 方法</span>
<span class="token comment">// 要注意静态变量,C 中调用处是静态的，这里必须要静态</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">changeScreen</span><span class="token punctuation">(</span><span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// do  someing</span>
     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
 
<span class="token comment">// 在适宜的时机调用，以便C中保存数据，(我是在onCreate 中调用，JNI加载完后调用)</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token function">listenOrientation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// CPP 文件中创建 JNI 方法</span>
 
<span class="token class-name">JavaVM</span> <span class="token operator">*</span>g_jvm <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
jobject g_obj <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
 
 
extern <span class="token string">&quot;C&quot;</span> <span class="token constant">JNIEXPORT</span> jstring <span class="token constant">JNICALL</span>
<span class="token class-name">Java_org_libsdl_app_SDLActivity_listenOrientation</span><span class="token punctuation">(</span>
        <span class="token class-name">JNIEnv</span> <span class="token operator">*</span>env<span class="token punctuation">,</span> jclass thiz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span><span class="token function">string</span> hello <span class="token operator">=</span> <span class="token string">&quot;zhj Hello from C++&quot;</span><span class="token punctuation">;</span>
    hello <span class="token operator">+=</span> <span class="token function">avcodec_configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    env<span class="token operator">-&gt;</span><span class="token class-name">GetJavaVM</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>g_jvm<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">// Attach主线程</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>g_jvm<span class="token operator">-&gt;</span><span class="token class-name">AttachCurrentThread</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>env<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">JNI_OK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;%s: zhj AttachCurrentThread() failed&quot;</span><span class="token punctuation">,</span> __FUNCTION__<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    g_obj <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token class-name">NewGlobalRef</span><span class="token punctuation">(</span>thiz<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重点在这里保存全局变量</span>
 
 
    <span class="token keyword">return</span> env<span class="token operator">-&gt;</span><span class="token class-name">NewStringUTF</span><span class="token punctuation">(</span>hello<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="签名相关" tabindex="-1"><a class="header-anchor" href="#签名相关"><span>签名相关</span></a></h4><p>https://blog.csdn.net/qq_21358401/article/details/79265357</p><p>Java方法是带有签名的,而C/C++ native方法要调用Java方法 需要知道Java方法的签名. 在terminal下: 首先编译出class文件</p><h4 id="单独编译java版本" tabindex="-1"><a class="header-anchor" href="#单独编译java版本"><span>单独编译java版本</span></a></h4><p>单独编译java版本，https://blog.csdn.net/u011304970/article/details/75713209</p><h3 id="java-向-c-传递数据" tabindex="-1"><a class="header-anchor" href="#java-向-c-传递数据"><span>Java 向 C 传递数据</span></a></h3>`,7),f={href:"https://blog.csdn.net/hj_key/article/details/106102841",target:"_blank",rel:"noopener noreferrer"},_=t(`<h1 id="系统教程" tabindex="-1"><a class="header-anchor" href="#系统教程"><span>系统教程</span></a></h1><p>参考：</p><ul><li>https://www.bilibili.com/video/BV188411V7Yq（1h快速入门版，选）</li><li>https://www.bilibili.com/video/BV1qW411L7oY（10h详细版）</li></ul><p>详见另一挂笔记</p><h1 id="案例" tabindex="-1"><a class="header-anchor" href="#案例"><span>案例</span></a></h1><h2 id="c-获取android-ip-mac" tabindex="-1"><a class="header-anchor" href="#c-获取android-ip-mac"><span>C 获取Android ip/mac</span></a></h2><p>失败版本：</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code>    <span class="token comment">// JNI环境</span>
    JNIEnv<span class="token operator">*</span> env <span class="token operator">=</span> g_jniEnv<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>env<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;获取Java环境失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Java虚拟环境 (在其他线程上调用JNI函数，需要使用AttachCurrentThread方法)</span>
    JavaVM<span class="token operator">*</span> jvm<span class="token punctuation">;</span>
    env<span class="token operator">-&gt;</span><span class="token function">GetJavaVM</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>jvm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>jvm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;获取Java VM环境失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> getEnvStat <span class="token operator">=</span> jvm<span class="token operator">-&gt;</span><span class="token function">GetEnv</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>env<span class="token punctuation">,</span> JNI_VERSION_1_6<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_EDETACHED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jvm<span class="token operator">-&gt;</span><span class="token function">AttachCurrentThread</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>env<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;Java未能连接当前线程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_EVERSION<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;获取Java环境状态失败，不支持版本&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Java类</span>
    jclass cls <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">FindClass</span><span class="token punctuation">(</span>JAVA_CLASS_PATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;获取 java class 失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_EDETACHED<span class="token punctuation">)</span> jvm<span class="token operator">-&gt;</span><span class="token function">DetachCurrentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Java方法</span>
    jmethodID ipMethodId <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token string">&quot;getLocalIpAddress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;()Ljava/lang/String;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jmethodID macMethodId <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token string">&quot;getLocalMacAddress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;()Ljava/lang/String;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ipMethodId <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> macMethodId <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LOGE</span><span class="token punctuation">(</span><span class="token string">&quot;获取 java method 失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_EDETACHED<span class="token punctuation">)</span> jvm<span class="token operator">-&gt;</span><span class="token function">DetachCurrentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 调用Java方法获取返回值</span>
    jobject object <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">AllocObject</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>
    jstring ip <span class="token operator">=</span> <span class="token punctuation">(</span>jstring<span class="token punctuation">)</span>env<span class="token operator">-&gt;</span><span class="token function">CallObjectMethod</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> ipMethodId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    jstring mac <span class="token operator">=</span> <span class="token punctuation">(</span>jstring<span class="token punctuation">)</span>env<span class="token operator">-&gt;</span><span class="token function">CallObjectMethod</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> macMethodId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>ipStr <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">GetStringUTFChars</span><span class="token punctuation">(</span>ip <span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>macStr <span class="token operator">=</span> env<span class="token operator">-&gt;</span><span class="token function">GetStringUTFChars</span><span class="token punctuation">(</span>mac<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_local_ip <span class="token operator">=</span> ipStr<span class="token punctuation">;</span>
    m_local_mac <span class="token operator">=</span> macStr<span class="token punctuation">;</span>

    <span class="token comment">// 不要忘记释放</span>
    env<span class="token operator">-&gt;</span><span class="token function">ReleaseStringUTFChars</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> ipStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    env<span class="token operator">-&gt;</span><span class="token function">ReleaseStringUTFChars</span><span class="token punctuation">(</span>mac<span class="token punctuation">,</span> macStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>getEnvStat <span class="token operator">==</span> JNI_EDETACHED<span class="token punctuation">)</span> jvm<span class="token operator">-&gt;</span><span class="token function">DetachCurrentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="c-获取android硬件信息和系统信息-system-property-get" tabindex="-1"><a class="header-anchor" href="#c-获取android硬件信息和系统信息-system-property-get"><span>C 获取Android硬件信息和系统信息 (__system_property_get)</span></a></h2>`,9),w={href:"https://blog.csdn.net/u011393891/article/details/113407057",target:"_blank",rel:"noopener noreferrer"},x=t(`<blockquote><p>获取android无非有三种方式：</p><ol><li>通过java代码获取</li><li>通过jni获取(本质是通过C++调用android接口获取)</li><li>直接通过C代码获取编译成动态库</li></ol><p>每种方式都有其优点和缺点。</p><ul><li>比如通过android接口获取mac地址时，获取到的是当前在使用的网卡的mac地址</li><li>比如当有线切换到无线时，获取到的mac地址会发生变化</li><li>而通过C代码因为本身不依赖于android，所以有些接口无法调用，或者有些命令无法执行，导致获取失败，比如获取imei时，通过android接口可以获取到imei，但是在C代码中却不能获取到。</li></ul><p>在通过NDK编译代码成为andorid的动态库时，NDK本身提供了一些接口来获取系统硬件信息：</p></blockquote><p>缺点：</p><blockquote><p>__system_property_get 是 Android 系统中的一个函数，用于获取 Android 系统中的一些属性信息。但是该函数并<strong>不能直接获取到 IP 和 MAC 地址</strong>。</p><p>获取 IP 和 MAC 地址通常需要使用 Android 中的网络接口，例如 WifiManager 和 NetworkInterface 类，从而获取到设备所在网络的相关信息。</p><p>由此，如果你想要获取这些信息，你需要在 Android 应用中请求相关的网络权限，然后使用相关 API 来获取这些信息，而不是直接使用 __system_property_get 函数。</p></blockquote><p>参考：https://blog.csdn.net/zymill/article/details/126693092</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/system_properties.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">SDeviceInfo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> szId<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> szPlatform<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> szHardware<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">char</span> szBrand<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 品牌客户名称</span>
    <span class="token keyword">char</span> szManufacturer<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 产品/硬件的制造商名称</span>
    <span class="token keyword">char</span> szCpuAbi<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> szCpuAbiList<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> szModel<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 终端用户可见的产品名称，可以有空格</span>
    <span class="token keyword">char</span> szDevice<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 采用的设备，作用范围：adb shell进去时显示的名称客户项目代号，不要有空格</span>
    <span class="token keyword">char</span> szBoard<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 采用的底板/处理器客户项目代号</span>
<span class="token punctuation">}</span> SDeviceInfo<span class="token punctuation">;</span>

<span class="token keyword">static</span> SDeviceInfo g_devInfo<span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.build.id&quot;</span><span class="token punctuation">,</span>             g_devInfo<span class="token punctuation">.</span>szId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.hardware&quot;</span><span class="token punctuation">,</span>             g_devInfo<span class="token punctuation">.</span>szHardware<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.board.platform&quot;</span><span class="token punctuation">,</span>       g_devInfo<span class="token punctuation">.</span>szPlatform<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.brand&quot;</span><span class="token punctuation">,</span>        g_devInfo<span class="token punctuation">.</span>szBrand<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.manufacturer&quot;</span><span class="token punctuation">,</span> g_devInfo<span class="token punctuation">.</span>szManufacturer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.cpu.abi&quot;</span><span class="token punctuation">,</span>      g_devInfo<span class="token punctuation">.</span>szCpuAbi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.cpu.abilist&quot;</span><span class="token punctuation">,</span>  g_devInfo<span class="token punctuation">.</span>szCpuAbiList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.model&quot;</span><span class="token punctuation">,</span>        g_devInfo<span class="token punctuation">.</span>szModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.device&quot;</span><span class="token punctuation">,</span>       g_devInfo<span class="token punctuation">.</span>szDevice<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">__system_property_get</span><span class="token punctuation">(</span><span class="token string">&quot;ro.product.board&quot;</span><span class="token punctuation">,</span>        g_devInfo<span class="token punctuation">.</span>szBoard<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>华为电视查询结果</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>id       <span class="token operator">:</span> HUAWEIKANT<span class="token operator">-</span><span class="token number">350</span>S
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>board<span class="token punctuation">.</span>platform <span class="token operator">:</span> honghu818
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>hardware       <span class="token operator">:</span> honghu8xx
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>brand  <span class="token operator">:</span> HUAWEI
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>manufacturer<span class="token operator">:</span> HUAWEI
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abi<span class="token operator">:</span> arm64<span class="token operator">-</span>v8a
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abilist<span class="token operator">:</span> arm64<span class="token operator">-</span>v8a<span class="token punctuation">,</span>armeabi<span class="token operator">-</span>v7a<span class="token punctuation">,</span>armeabi
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>model  <span class="token operator">:</span> KANT<span class="token operator">-</span><span class="token number">350</span>S
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>device <span class="token operator">:</span> HWKANT<span class="token operator">-</span><span class="token number">350</span>S
<span class="token punctuation">[</span>device_info_init<span class="token punctuation">]</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>board <span class="token operator">:</span> KANT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ro.product 属性</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>brand	<span class="token comment">// 品牌客户名称</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>model	<span class="token comment">// 终端用户可见的产品名称，可以有空格</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>manufacturer	<span class="token comment">// 产品/硬件的制造商名称</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>name	<span class="token comment">// 手机正式名称客户项目代号，不要有空格，如果包含空格，会导致Google账号无法登陆</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>board	<span class="token comment">// 采用的底板/处理器客户项目代号</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>device	<span class="token comment">// 采用的设备，作用范围：adb shell进去时显示的名称客户项目代号，不要有空格</span>
<span class="token operator">*</span> ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>product	<span class="token comment">// 已经过时，现在使用“ro.product.device”，等同于“ro.product.device”</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Android 系统属性详情（创维电视案例）</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">begin</span> <span class="token expression">build properties</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">autogenerated</span> <span class="token expression">by buildinfo<span class="token punctuation">.</span>sh</span></span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>id<span class="token operator">=</span>LMY47V
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>display<span class="token punctuation">.</span>id<span class="token operator">=</span>LMY47V<span class="token punctuation">.</span><span class="token number">20181229</span> test<span class="token operator">-</span>keys
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>incremental<span class="token operator">=</span><span class="token number">20181229</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>sdk<span class="token operator">=</span><span class="token number">22</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>codename<span class="token operator">=</span>REL
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>all_codenames<span class="token operator">=</span>REL
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>release<span class="token operator">=</span><span class="token number">5.1</span><span class="token number">.1</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>security_patch<span class="token operator">=</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>version<span class="token punctuation">.</span>base_os<span class="token operator">=</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>date<span class="token operator">=</span>Sat Dec <span class="token number">29</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">13</span><span class="token operator">:</span><span class="token number">24</span> CST <span class="token number">2018</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utc<span class="token operator">=</span><span class="token number">1546067604</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>type<span class="token operator">=</span>user
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>user<span class="token operator">=</span>www<span class="token operator">-</span>data
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>host<span class="token operator">=</span>rjyby07
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>tags<span class="token operator">=</span>test<span class="token operator">-</span>keys
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>flavor<span class="token operator">=</span>p351<span class="token operator">-</span>user
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>model<span class="token operator">=</span><span class="token number">8</span>A20 V8E
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>brand<span class="token operator">=</span>Skyworth
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>name<span class="token operator">=</span>p351
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>device<span class="token operator">=</span>p351
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>board<span class="token operator">=</span>p351
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">ro</span><span class="token expression"><span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abi and ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abi2 are obsolete<span class="token punctuation">,</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">use</span> <span class="token expression">ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abilist instead<span class="token punctuation">.</span></span></span>
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abi<span class="token operator">=</span>armeabi<span class="token operator">-</span>v7a
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abi2<span class="token operator">=</span>armeabi
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abilist<span class="token operator">=</span>armeabi<span class="token operator">-</span>v7a<span class="token punctuation">,</span>armeabi
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abilist32<span class="token operator">=</span>armeabi<span class="token operator">-</span>v7a<span class="token punctuation">,</span>armeabi
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>abilist64<span class="token operator">=</span>
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>manufacturer<span class="token operator">=</span>Skyworth
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>locale<span class="token punctuation">.</span>language<span class="token operator">=</span>zh
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>locale<span class="token punctuation">.</span>region<span class="token operator">=</span>CN
ro<span class="token punctuation">.</span>wifi<span class="token punctuation">.</span>channels<span class="token operator">=</span><span class="token number">11</span>
ro<span class="token punctuation">.</span>board<span class="token punctuation">.</span>platform<span class="token operator">=</span>gxbaby
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">ro</span><span class="token expression"><span class="token punctuation">.</span>build<span class="token punctuation">.</span>product is obsolete<span class="token punctuation">;</span> use ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>device</span></span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>product<span class="token operator">=</span>p351
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Do not try to parse description<span class="token punctuation">,</span> fingerprint<span class="token punctuation">,</span> or thumbprint</span></span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>description<span class="token operator">=</span>p351<span class="token operator">-</span>user <span class="token number">5.1</span><span class="token number">.1</span> LMY47V <span class="token number">20181229</span> test<span class="token operator">-</span>keys
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>fingerprint<span class="token operator">=</span>Skyworth<span class="token operator">/</span>p351<span class="token operator">/</span>p351<span class="token operator">:</span><span class="token number">5.1</span><span class="token number">.1</span><span class="token operator">/</span>LMY47V<span class="token operator">/</span><span class="token number">20181229</span><span class="token operator">:</span>user<span class="token operator">/</span>test<span class="token operator">-</span>keys
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>characteristics<span class="token operator">=</span>mbx<span class="token punctuation">,</span>nosdcard
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">end</span> <span class="token expression">build properties</span></span>
#
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">from</span> <span class="token expression">device<span class="token operator">/</span>customer<span class="token operator">/</span>p351<span class="token operator">/</span>system<span class="token punctuation">.</span>prop</span></span>
#
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression"><span class="token keyword">for</span> Coocaa5<span class="token punctuation">.</span>x by liyang</span></span>
init<span class="token punctuation">.</span>svc<span class="token punctuation">.</span>adbd<span class="token operator">=</span>stopping
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>usb<span class="token punctuation">.</span>config<span class="token operator">=</span>mtp
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>dev_owner<span class="token operator">=</span>system
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span><span class="token number">3</span>Dflag<span class="token operator">=</span><span class="token number">0</span>
ro<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>lcd_density<span class="token operator">=</span><span class="token number">240</span>
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>model<span class="token operator">=</span><span class="token number">8</span>A20 V8E
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>brand<span class="token operator">=</span>Skyworth
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>manufacturer<span class="token operator">=</span>Skyworth
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>ccos<span class="token punctuation">.</span>type<span class="token operator">=</span>mix
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skymodel<span class="token operator">=</span><span class="token number">8</span>A20
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skytype<span class="token operator">=</span>V8E
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skymid<span class="token operator">=</span>T968
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skyversion<span class="token punctuation">.</span>svn<span class="token operator">=</span><span class="token keyword">default</span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skyversion<span class="token punctuation">.</span>tianci<span class="token operator">=</span><span class="token keyword">default</span>
persist<span class="token punctuation">.</span>service<span class="token punctuation">.</span>homepage<span class="token punctuation">.</span>pkg<span class="token operator">=</span>com<span class="token punctuation">.</span>coocaa<span class="token punctuation">.</span>homeshell
persist<span class="token punctuation">.</span>service<span class="token punctuation">.</span>homepage<span class="token punctuation">.</span>cls<span class="token operator">=</span>com<span class="token punctuation">.</span>coocaa<span class="token punctuation">.</span>homeshell<span class="token punctuation">.</span>Activity
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span><span class="token number">4</span>k<span class="token operator">=</span><span class="token number">1</span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>h265<span class="token operator">=</span><span class="token number">1</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">SystemService set</span></span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>mac<span class="token operator">=</span><span class="token number">0</span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>barcode<span class="token operator">=</span><span class="token number">0</span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>launcher<span class="token punctuation">.</span>start<span class="token operator">=</span><span class="token number">0</span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>factory<span class="token operator">=</span><span class="token number">0</span>
third<span class="token punctuation">.</span>get<span class="token punctuation">.</span>facSingleKeyEnable<span class="token operator">=</span>false
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression">by liyang end</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression">by sunsikai <span class="token keyword">for</span> new start flow start</span></span>
persist<span class="token punctuation">.</span>get<span class="token punctuation">.</span>facSingleKeyEnable<span class="token operator">=</span><span class="token number">0</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression">by sunsikai <span class="token keyword">for</span> new start flow end</span></span>

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Set display related config</span></span>
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>has<span class="token punctuation">.</span>mbxuimode<span class="token operator">=</span>true
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>has<span class="token punctuation">.</span>tvuimode<span class="token operator">=</span>true
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>has<span class="token punctuation">.</span>realoutputmode<span class="token operator">=</span>true

debug<span class="token punctuation">.</span>hwui<span class="token punctuation">.</span>render_dirty_regions<span class="token operator">=</span>false
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">camera</span> <span class="token expression">max to <span class="token number">720</span>p</span></span>
ro<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>preview<span class="token punctuation">.</span>MaxSize<span class="token operator">=</span><span class="token number">1280</span>x720
ro<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>preview<span class="token punctuation">.</span>LimitedRate<span class="token operator">=</span><span class="token number">1280</span>x720x30<span class="token punctuation">,</span><span class="token number">640</span>x480x30<span class="token punctuation">,</span><span class="token number">320</span>x240x28
ro<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>preview<span class="token punctuation">.</span>UseMJPEG<span class="token operator">=</span><span class="token number">1</span>

persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>fastboot<span class="token operator">=</span>false
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>strictmode<span class="token punctuation">.</span>disable<span class="token operator">=</span>true

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">wifi Only</span></span>
ro<span class="token punctuation">.</span>radio<span class="token punctuation">.</span>noril<span class="token operator">=</span>false

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">need pppoe</span></span>
ro<span class="token punctuation">.</span>net<span class="token punctuation">.</span>pppoe<span class="token operator">=</span>true

<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">Dolby DD<span class="token operator">+</span> decoder option</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">for</span> <span class="token expression">TV<span class="token operator">/</span>IPTV need set RF drc mode by <span class="token keyword">default</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">defined this prop<span class="token punctuation">,</span>will overwrite the value of</span></span>
#<span class="token operator">/</span>sys<span class="token operator">/</span>class<span class="token operator">/</span>audiodsp<span class="token operator">/</span>ac3_drc_control
#<span class="token string">&quot;CUSTOM_0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUSTOM_1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;LINE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;RF&quot;</span>
ro<span class="token punctuation">.</span>dolby<span class="token punctuation">.</span>drcmode<span class="token operator">=</span><span class="token number">3</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">this</span> <span class="token expression">prop to <span class="token keyword">for</span> videoplayer display the DD<span class="token operator">+</span><span class="token operator">/</span>DD icon when playback</span></span>
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>support<span class="token punctuation">.</span>dolby<span class="token operator">=</span>true
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">DTS decoder option</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">display</span> <span class="token expression">dts icon when playback</span></span>
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>support<span class="token punctuation">.</span>dts<span class="token operator">=</span>true
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">DTS<span class="token operator">-</span>HD support prop</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ro</span><span class="token expression"><span class="token punctuation">.</span>platform<span class="token punctuation">.</span>support<span class="token punctuation">.</span>dtstrans<span class="token operator">=</span>true</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ro</span><span class="token expression"><span class="token punctuation">.</span>platform<span class="token punctuation">.</span>support<span class="token punctuation">.</span>dtsmulasset<span class="token operator">=</span>true</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">DTS<span class="token operator">-</span>HD prop end</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Enable player buildin</span></span>
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>seekkeyframe<span class="token operator">=</span>true
media<span class="token punctuation">.</span>amsuperplayer<span class="token punctuation">.</span>enable<span class="token operator">=</span>true
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>enable<span class="token operator">-</span>acodecs<span class="token operator">=</span>ac3<span class="token punctuation">,</span>eac3<span class="token punctuation">,</span>rm<span class="token punctuation">,</span>dts
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>enable<span class="token operator">=</span>true
media<span class="token punctuation">.</span>amsuperplayer<span class="token punctuation">.</span>m4aplayer<span class="token operator">=</span>STAGEFRIGHT_PLAYER
media<span class="token punctuation">.</span>amsuperplayer<span class="token punctuation">.</span>defplayer<span class="token operator">=</span>PV_PLAYER
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>thumbnail<span class="token operator">=</span>true
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>widevineenable<span class="token operator">=</span>false
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>dsource4local<span class="token operator">=</span><span class="token number">1</span>
media<span class="token punctuation">.</span>amplayer<span class="token punctuation">.</span>startmode<span class="token operator">=</span>true
media<span class="token punctuation">.</span>arm<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>decoder<span class="token operator">=</span>ape<span class="token punctuation">,</span>flac<span class="token punctuation">,</span>dts<span class="token punctuation">,</span>ac3<span class="token punctuation">,</span>eac3<span class="token punctuation">,</span>wma<span class="token punctuation">,</span>wmapro<span class="token punctuation">,</span>mp3<span class="token punctuation">,</span>aac<span class="token punctuation">,</span>vorbis<span class="token punctuation">,</span>raac<span class="token punctuation">,</span>cook<span class="token punctuation">,</span>amr<span class="token punctuation">,</span>pcm<span class="token punctuation">,</span>adpcm<span class="token punctuation">,</span>aac_latm<span class="token punctuation">,</span>rm
media<span class="token punctuation">.</span>wfd<span class="token punctuation">.</span>use<span class="token operator">-</span>pcm<span class="token operator">-</span>audio<span class="token operator">=</span>false
media<span class="token punctuation">.</span>wfd<span class="token punctuation">.</span>videoresolution<span class="token operator">-</span>type<span class="token operator">=</span><span class="token number">1</span>
media<span class="token punctuation">.</span>wfd<span class="token punctuation">.</span>videoresolution<span class="token operator">-</span>group<span class="token operator">=</span><span class="token number">0</span>
media<span class="token punctuation">.</span>wfd<span class="token punctuation">.</span>videoframerate<span class="token operator">=</span><span class="token number">24</span>
media<span class="token punctuation">.</span>wfd<span class="token punctuation">.</span>video<span class="token operator">-</span>bitrate<span class="token operator">=</span><span class="token number">2000000</span>
media<span class="token punctuation">.</span>html5videowin<span class="token punctuation">.</span>enable<span class="token operator">=</span><span class="token number">1</span>
media<span class="token punctuation">.</span>decoder<span class="token punctuation">.</span>vfm<span class="token punctuation">.</span>defmap<span class="token operator">=</span>decoder ppmgr deinterlace amvideo
media<span class="token punctuation">.</span>dtv<span class="token punctuation">.</span>running<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">const</span><span class="token punctuation">.</span>bootanim<span class="token punctuation">.</span>delay<span class="token operator">=</span><span class="token number">2500</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression"><span class="token keyword">for</span> not seek chinese track automaticly</span></span>
audio<span class="token punctuation">.</span>track<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span>chinese<span class="token operator">=</span>false
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression"><span class="token keyword">for</span> video boot<span class="token punctuation">,</span> <span class="token number">1</span> means use video boot<span class="token punctuation">,</span> others not <span class="token punctuation">.</span></span></span>
service<span class="token punctuation">.</span>bootvideo<span class="token operator">=</span><span class="token number">1</span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">default</span> <span class="token expression">boot video volume</span></span>
sys<span class="token punctuation">.</span>bootvideo<span class="token punctuation">.</span>vol<span class="token operator">=</span><span class="token number">5</span>

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Define </span><span class="token macro-name">drm</span> <span class="token expression"><span class="token keyword">for</span> this device</span></span>
drm<span class="token punctuation">.</span>service<span class="token punctuation">.</span>enabled<span class="token operator">=</span><span class="token number">1</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">used</span> <span class="token expression">forward seek <span class="token keyword">for</span> libplayer</span></span>
media<span class="token punctuation">.</span>libplayer<span class="token punctuation">.</span>seek<span class="token punctuation">.</span>fwdsearch<span class="token operator">=</span><span class="token number">1</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">fix</span> <span class="token expression">dd test av sync</span></span>
media<span class="token punctuation">.</span>libplayer<span class="token punctuation">.</span>fillzerothrsh<span class="token operator">=</span><span class="token number">27000</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">disable</span> <span class="token expression">slowsync</span></span>
libplayer<span class="token punctuation">.</span>slowsync<span class="token punctuation">.</span>disable<span class="token operator">=</span>true

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">fix</span> <span class="token expression">hls sync</span></span>
libplayer<span class="token punctuation">.</span>livets<span class="token punctuation">.</span>softdemux<span class="token operator">=</span><span class="token number">1</span>
libplayer<span class="token punctuation">.</span>netts<span class="token punctuation">.</span>recalcpts<span class="token operator">=</span><span class="token number">1</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">map</span> <span class="token expression">volume</span></span>
ro<span class="token punctuation">.</span>audio<span class="token punctuation">.</span>mapvalue<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression">livhls<span class="token punctuation">,</span>libcurl as <span class="token keyword">default</span> hls</span></span>
media<span class="token punctuation">.</span>libplayer<span class="token punctuation">.</span>curlenable<span class="token operator">=</span>true
media<span class="token punctuation">.</span>libplayer<span class="token punctuation">.</span>modules<span class="token operator">=</span>vhls_mod<span class="token punctuation">,</span>dash_mod<span class="token punctuation">,</span>curl_mod<span class="token punctuation">,</span>prhls_mod<span class="token punctuation">,</span>vm_mod

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">add</span> <span class="token expression"><span class="token keyword">for</span> chezhenwu</span></span>
media<span class="token punctuation">.</span>libplayer<span class="token punctuation">.</span>show_firstframe<span class="token operator">=</span><span class="token number">0</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">Hdmi In</span></span>
ro<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>hdmiin<span class="token punctuation">.</span>enable<span class="token operator">=</span>true
mbx<span class="token punctuation">.</span>hdmiin<span class="token punctuation">.</span>switchfull<span class="token operator">=</span>false
mbx<span class="token punctuation">.</span>hdmiin<span class="token punctuation">.</span>videolayer<span class="token operator">=</span>false

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">adb</span></span>
service<span class="token punctuation">.</span>adb<span class="token punctuation">.</span>tcp<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">5555</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">switch</span> <span class="token expression">different remote control</span></span>
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>remoteid<span class="token operator">=</span><span class="token number">0</span>e

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">hdcp</span><span class="token expression"><span class="token number">22</span>_key control</span></span>
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>hdcp22key<span class="token operator">=</span>false

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">blutooth</span> <span class="token expression">volume</span></span>
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>T868<span class="token punctuation">.</span>bluth<span class="token punctuation">.</span>val<span class="token operator">=</span><span class="token number">30</span>
######## UBOOTENV VARIBLES <span class="token operator">-</span> r<span class="token operator">/</span>w as system properties ##########
#
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token expression">Now we can load ubootenv varibles to system properties<span class="token punctuation">.</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token expression">We use a special <span class="token function">prefix</span> <span class="token punctuation">(</span></span><span class="token string">&quot;ubootenv.var&quot;</span> <span class="token expression">as <span class="token keyword">default</span><span class="token punctuation">)</span> to indicate that the </span><span class="token char">&#39;property&#39;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token directive keyword">actually</span> <span class="token expression">is an ubootenv varible<span class="token punctuation">.</span></span></span>
#
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token expression">A ubootenv </span><span class="token char">&#39;property&#39;</span> <span class="token expression">will be initialized during system booting<span class="token punctuation">.</span> And when user set</span></span>
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token directive keyword">a</span> <span class="token expression">different value<span class="token punctuation">,</span> it will be written back to ubootenv device immediately<span class="token punctuation">.</span></span></span>
#

## prefix of ubootenv varibles <span class="token operator">-</span> should less than <span class="token number">16</span> chars<span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">UBOOTENV MTD NAME</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>bootcmd<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>cpuclock<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>gpuclock<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>memsize<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>ethaddr<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>ipaddr<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>gatewayip<span class="token operator">=</span></span></span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>outputmode<span class="token operator">=</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>screenratio<span class="token operator">=</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ubootenv</span><span class="token expression"><span class="token punctuation">.</span>var<span class="token punctuation">.</span>oobeflag<span class="token operator">=</span></span></span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>p_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>p_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>p_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>p_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>i_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>i_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>i_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">480</span>i_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>p_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>p_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>p_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>p_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>i_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>i_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>i_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">576</span>i_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">720</span>p_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">720</span>p_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">720</span>p_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">720</span>p_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>p_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>p_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>p_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>p_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>i_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>i_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>i_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">1080</span>i_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k24hz_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k24hz_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k24hz_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k24hz_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k25hz_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k25hz_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k25hz_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k25hz_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k30hz_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k30hz_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k30hz_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k30hz_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k50hz_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k50hz_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k50hz_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k50hz_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k60hz_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k60hz_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k60hz_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2k60hz_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2ksmpte_x<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2ksmpte_y<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2ksmpte_w<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span><span class="token number">4</span>k2ksmpte_h<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>digitaudiooutput<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>defaulttvfrequency<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>has<span class="token punctuation">.</span>accelerometer<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>cecconfig<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>cvbsmode<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>hdmimode<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>is<span class="token punctuation">.</span>bestmode<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>disp<span class="token punctuation">.</span>fromleft<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>edid<span class="token punctuation">.</span>crcvalue<span class="token operator">=</span>

## p351 control uboot env
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>firstboot<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>ipaddr<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>gatewayip<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>suspend<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>ubootversion<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>usbboot<span class="token operator">=</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">disable</span> <span class="token expression">panel rotate</span></span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>has<span class="token punctuation">.</span>accelerometer<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>upgradefbc<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>outputmode<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>lcd_reverse<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>console_bug<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>panel_id<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>panel_type<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>bootfusb<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>reboot_mode<span class="token operator">=</span>
ubootenv<span class="token punctuation">.</span>var<span class="token punctuation">.</span>bootonetime<span class="token operator">=</span>

tv<span class="token punctuation">.</span>need<span class="token punctuation">.</span>preview_window<span class="token operator">=</span>true
<span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">TV project<span class="token punctuation">,</span>set omx to video layer<span class="token punctuation">,</span>or PQ hasn&#39;t effect</span></span>
media<span class="token punctuation">.</span>omx<span class="token punctuation">.</span>display_mode<span class="token operator">=</span><span class="token number">1</span>

#
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">ADDITIONAL_BUILD_PROPERTIES</span></span>
<span class="token macro property"><span class="token directive-hash">#</span>
<span class="token directive keyword">ro</span><span class="token expression"><span class="token punctuation">.</span>config<span class="token punctuation">.</span>wallpaper<span class="token operator">=</span><span class="token operator">/</span>system<span class="token operator">/</span>etc<span class="token operator">/</span>default_wallpaper<span class="token punctuation">.</span>png</span></span>
ro<span class="token punctuation">.</span>build<span class="token punctuation">.</span>skyversion<span class="token operator">=</span><span class="token number">018.012</span><span class="token number">.290</span>
ro<span class="token punctuation">.</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>dateformat<span class="token operator">=</span>MM<span class="token operator">-</span>dd<span class="token operator">-</span>yyyy
ro<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ringtone<span class="token operator">=</span>Ring_Synth_04<span class="token punctuation">.</span>ogg
ro<span class="token punctuation">.</span>config<span class="token punctuation">.</span>notification_sound<span class="token operator">=</span>pixiedust<span class="token punctuation">.</span>ogg
ro<span class="token punctuation">.</span>carrier<span class="token operator">=</span>unknown
ro<span class="token punctuation">.</span>config<span class="token punctuation">.</span>alarm_alert<span class="token operator">=</span>Alarm_Classic<span class="token punctuation">.</span>ogg
ro<span class="token punctuation">.</span>opengles<span class="token punctuation">.</span>version<span class="token operator">=</span><span class="token number">131072</span>
camera<span class="token punctuation">.</span>disable_zsl_mode<span class="token operator">=</span><span class="token number">1</span>
ro<span class="token punctuation">.</span>app<span class="token punctuation">.</span>optimization<span class="token operator">=</span>true
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>firmware<span class="token operator">=</span><span class="token number">00502001</span>
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>otaupdateurl<span class="token operator">=</span>http<span class="token operator">:</span><span class="token comment">//10.28.11.53:8080/otaupdate/update</span>
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>timezone<span class="token operator">=</span>Asia<span class="token operator">/</span>Shanghai
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heapstartsize<span class="token operator">=</span><span class="token number">16</span>m
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heapgrowthlimit<span class="token operator">=</span><span class="token number">192</span>m
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heapsize<span class="token operator">=</span><span class="token number">512</span>m
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heaptargetutilization<span class="token operator">=</span><span class="token number">0.75</span>
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heapminfree<span class="token operator">=</span><span class="token number">512</span>k
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>heapmaxfree<span class="token operator">=</span><span class="token number">8</span>m
sys<span class="token punctuation">.</span>fb<span class="token punctuation">.</span>bits<span class="token operator">=</span><span class="token number">32</span>
ro<span class="token punctuation">.</span>hdmi<span class="token punctuation">.</span>device_type<span class="token operator">=</span><span class="token number">0</span>
wifi<span class="token punctuation">.</span>interface<span class="token operator">=</span>wlan0
config<span class="token punctuation">.</span>disable_bluetooth<span class="token operator">=</span>false
ro<span class="token punctuation">.</span>config<span class="token punctuation">.</span>media_vol_steps<span class="token operator">=</span><span class="token number">100</span>
ro<span class="token punctuation">.</span>product<span class="token punctuation">.</span>support<span class="token punctuation">.</span>tvaudio<span class="token operator">=</span>true
drm<span class="token punctuation">.</span>service<span class="token punctuation">.</span>enable<span class="token operator">=</span>true
ro<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>has<span class="token punctuation">.</span>pppoe<span class="token operator">=</span>true
config<span class="token punctuation">.</span>disable_instaboot<span class="token operator">=</span>false
persist<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>lib<span class="token punctuation">.</span><span class="token number">2</span><span class="token operator">=</span>libart<span class="token punctuation">.</span>so
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>isa<span class="token punctuation">.</span>arm<span class="token punctuation">.</span>features<span class="token operator">=</span><span class="token keyword">default</span>
dalvik<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>dexopt<span class="token operator">-</span>flags<span class="token operator">=</span>m<span class="token operator">=</span>y
net<span class="token punctuation">.</span>bt<span class="token punctuation">.</span>name<span class="token operator">=</span>Android
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="recorder-案例-java调用cpp" tabindex="-1"><a class="header-anchor" href="#recorder-案例-java调用cpp"><span>Recorder 案例 - java调用cpp</span></a></h2><p>&lt; MainActivity.java</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>holowan<span class="token punctuation">.</span>recorder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>holowan<span class="token punctuation">.</span>recorder<span class="token punctuation">.</span>databinding<span class="token punctuation">.</span></span><span class="token class-name">ActivityMainBinding</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token comment">// Used to load the &#39;recorder&#39; library on application startup.</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">loadLibrary</span><span class="token punctuation">(</span><span class="token string">&quot;recorder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        
    <span class="token doc-comment comment">/** 创建事件 */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>

        binding <span class="token operator">=</span> <span class="token class-name">ActivityMainBinding</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token function">getLayoutInflater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span><span class="token function">getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">deleteDirWihtFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">copyAssetsDir2Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 步骤1：采用匿名类，直接 创建 线程类的实例</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;native-main&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 步骤2：复写run（），内容 = 定义线程行为</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 步骤3：通过 线程对象 控制线程的状态，如 运行、睡眠、挂起  / 停止</span>
                <span class="token function">recorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">WindowManager<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span><span class="token constant">FLAG_KEEP_SCREEN_ON</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保持亮屏 (防止熄屏导致连接断开，关屏保持连接以后再修)</span>
        <span class="token function">bindViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        
    <span class="token doc-comment comment">/** 入口函数 (多语言交互，cpp实现给java调用) */</span>
    <span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">int</span> <span class="token function">recorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>&lt; main.cpp</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>ANDROID<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__ANDROID__<span class="token punctuation">)</span></span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;jni.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token comment">// 进入程序</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>ANDROID<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__ANDROID__<span class="token punctuation">)</span></span></span>
<span class="token keyword">extern</span> <span class="token string">&quot;C&quot;</span> JNIEXPORT jint JNICALL
<span class="token function">Java_com_holowan_recorder_MainActivity_recorder</span><span class="token punctuation">(</span>JNIEnv <span class="token operator">*</span>env<span class="token punctuation">,</span> jobject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    g_ctrl<span class="token punctuation">.</span>java_env <span class="token operator">=</span> env<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="recorder-案例-js调用java-其实这个不属于jni部分" tabindex="-1"><a class="header-anchor" href="#recorder-案例-js调用java-其实这个不属于jni部分"><span>Recorder 案例 - js调用java (其实这个不属于JNI部分)</span></a></h2><p>&lt; MainActivity.java</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * web前端剪切板 (多语言交互，java实现暴露给js调用)
 * 注意：这里看起来没有被调用，但其实不然。是注入到js接口里让前端来调用这个代码的
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebAppInterface</span> <span class="token punctuation">{</span>
    <span class="token class-name">Context</span> mContext<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** 实例化接口并设置上下文 */</span>
    <span class="token class-name">WebAppInterface</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mContext <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** 显示网页上的toast */</span>
    <span class="token annotation punctuation">@JavascriptInterface</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">copyToClipboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ClipboardManager</span> clipboard <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ClipboardManager</span><span class="token punctuation">)</span> mContext<span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">CLIPBOARD_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ClipData</span> clip <span class="token operator">=</span> <span class="token class-name">ClipData</span><span class="token punctuation">.</span><span class="token function">newPlainText</span><span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        clipboard<span class="token punctuation">.</span><span class="token function">setPrimaryClip</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>demo.js</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">Android<span class="token punctuation">.</span><span class="token function">copyToClipboard</span><span class="token punctuation">(</span><span class="token string">&#39;复制的文本&#39;</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>复制到剪切板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,21);function j(I,E){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("p",null,[s("参考："),n("a",r,[s("C/C++ 和Java 相互传递参数通信"),p(a)])]),k,n("p",null,[s("参考："),n("a",d,[s("C/C++ 和Java 相互传递参数通信"),p(a)])]),v,n("ol",null,[n("li",null,[m,n("p",null,[s("先在 Activity 中调用 JNI 方法，然后通过C 中"),n("a",b,[s("反射"),p(a)]),s("，找到activity的类以及方法，进行调用。")]),h]),y]),g,n("p",null,[s("参考："),n("a",f,[s("C/C++ 和Java 相互传递参数通信"),p(a)])]),_,n("p",null,[s("参考："),n("a",w,[s("【CSDN】纯C代码获取android硬件信息和系统信息，不依赖JNI"),p(a)])]),x])}const C=e(l,[["render",j],["__file","JNI.html.vue"]]),J=JSON.parse('{"path":"/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/03.%20Tools/01.%20%E7%9F%A5%E8%AF%86%E5%B1%82/%E5%A4%9A%E8%AF%AD%E8%A8%80/JNI/JNI.html","title":"JNI","lang":"zh-CN","frontmatter":{"description":"JNI 目录 JNI (Java Native Interface，Java原生接口) 是NDK (Native Develop Kit，原生开发组件) 里的一个接口 参考文档： https://developer.android.com/training/articles/perf-jni?hl=zh-cn 介绍 JNI 是指 Java 原生接口。它...","head":[["meta",{"property":"og:url","content":"http://192.168.0.101:8080/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/03.%20Tools/01.%20%E7%9F%A5%E8%AF%86%E5%B1%82/%E5%A4%9A%E8%AF%AD%E8%A8%80/JNI/JNI.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"JNI"}],["meta",{"property":"og:description","content":"JNI 目录 JNI (Java Native Interface，Java原生接口) 是NDK (Native Develop Kit，原生开发组件) 里的一个接口 参考文档： https://developer.android.com/training/articles/perf-jni?hl=zh-cn 介绍 JNI 是指 Java 原生接口。它..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JNI\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"JNI","slug":"jni","link":"#jni","children":[]},{"level":1,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":1,"title":"JNI (Java Native Interface，Java原生接口)","slug":"jni-java-native-interface-java原生接口","link":"#jni-java-native-interface-java原生接口","children":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"参数通信","slug":"参数通信","link":"#参数通信","children":[{"level":3,"title":"C 调用 Java 方法","slug":"c-调用-java-方法","link":"#c-调用-java-方法","children":[{"level":4,"title":"签名相关","slug":"签名相关","link":"#签名相关","children":[]},{"level":4,"title":"单独编译java版本","slug":"单独编译java版本","link":"#单独编译java版本","children":[]}]},{"level":3,"title":"Java 向 C 传递数据","slug":"java-向-c-传递数据","link":"#java-向-c-传递数据","children":[]}]}]},{"level":1,"title":"系统教程","slug":"系统教程","link":"#系统教程","children":[]},{"level":1,"title":"案例","slug":"案例","link":"#案例","children":[{"level":2,"title":"C 获取Android ip/mac","slug":"c-获取android-ip-mac","link":"#c-获取android-ip-mac","children":[]},{"level":2,"title":"C 获取Android硬件信息和系统信息 (__system_property_get)","slug":"c-获取android硬件信息和系统信息-system-property-get","link":"#c-获取android硬件信息和系统信息-system-property-get","children":[]},{"level":2,"title":"Recorder 案例 - java调用cpp","slug":"recorder-案例-java调用cpp","link":"#recorder-案例-java调用cpp","children":[]},{"level":2,"title":"Recorder 案例 - js调用java (其实这个不属于JNI部分)","slug":"recorder-案例-js调用java-其实这个不属于jni部分","link":"#recorder-案例-js调用java-其实这个不属于jni部分","children":[]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":9.11,"words":2734},"filePathRelative":"MdNote_Public/01. 设计开发与数据生产/Develop/03. Tools/01. 知识层/多语言/JNI/JNI.md","excerpt":"\\n<h1>目录</h1>\\n<h1>JNI (Java Native Interface，Java原生接口)</h1>\\n<p>是NDK (Native Develop Kit，原生开发组件) 里的一个接口</p>\\n<p>参考文档：</p>\\n<ul>\\n<li>https://developer.android.com/training/articles/perf-jni?hl=zh-cn</li>\\n</ul>\\n<h2>介绍</h2>\\n<p>JNI 是指 Java 原生接口。它定义了 Android 从受管理代码（使用 Java 或 Kotlin  编程语言编写）编译的字节码与原生代码（使用 C/C++ 编写）互动的方式。JNI  不依赖于供应商，支持从动态共享库加载代码，虽然有时较为繁琐，但效率尚可。</p>","autoDesc":true}');export{C as comp,J as data};
