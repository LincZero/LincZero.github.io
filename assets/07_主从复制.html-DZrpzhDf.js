import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as n,a}from"./app-Ld2qzqw_.js";const t={},i=a(`<h1 id="redis主从复制" tabindex="-1"><a class="header-anchor" href="#redis主从复制"><span>Redis主从复制</span></a></h1><h2 id="概念、主节点与从节点" tabindex="-1"><a class="header-anchor" href="#概念、主节点与从节点"><span>概念、主节点与从节点</span></a></h2><ul><li>主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。</li><li>主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制</li><li>职责：且一般来说主节点负责写操作，从节点负责读操作</li><li>方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据</li><li>集群：通过设置主节点和多个从节点，可以创建一个Redis集群</li></ul><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><p>主节点不需要修改，默认就是主节点</p><p>从节点的修改有两种方式：</p><ul><li>命令</li><li>配置文件</li></ul><h3 id="命令方式" tabindex="-1"><a class="header-anchor" href="#命令方式"><span>命令方式</span></a></h3><ul><li>查看当前节点角色：role</li><li>配置所属主节点：replicaof host port 或者 slaveof host port (旧版)</li></ul><p>一般不用这种方式</p><h3 id="配置文件方式" tabindex="-1"><a class="header-anchor" href="#配置文件方式"><span>配置文件方式</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /opt/homebrew/etc	<span class="token comment"># 配置文件一般在redis安装目录下</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-ltr</span>
$ <span class="token function">cp</span> redis.conf ~
$ <span class="token builtin class-name">cd</span>
$ <span class="token function">cp</span> redis.conf redis-6380.conf
$ code redis-6380.conf

<span class="token comment"># 改动项。因为是同机器上运行，我们将6379作为主节点，从节点则为6380，区分开</span>
port <span class="token number">6380</span>							<span class="token comment"># 端口号，默认6379</span>
pidfile /var/run/redis_6370.pid		<span class="token comment"># 进程id，默认/var/run/redis.pid</span>
dbfilename dump-6380.rdb			<span class="token comment"># 备份文件，默认dump.rdb</span>
replicaof <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>			<span class="token comment"># 指定主节点，默认注释掉</span>

$ redis-server redis-6380.conf		<span class="token comment"># 启动从节点服务</span>
$ redis-cli <span class="token parameter variable">-p</span> <span class="token number">6380</span>					<span class="token comment"># 连接到从节点</span>
<span class="token operator">&gt;</span> info replication					<span class="token comment"># 查看信息</span>

<span class="token comment"># Replication</span>
role:slave							<span class="token comment"># 这里可以看到是从节点</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查（可选）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ redis-cli <span class="token comment"># 或redis-cli -p 6380</span>
<span class="token operator">&gt;</span> keys *							<span class="token comment"># 可以发现两边数据是一样的</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k4 v4							<span class="token comment"># 在主节点进行修改后，从节点也会有该变化</span>
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),l=[i];function c(r,d){return s(),n("div",null,l)}const m=e(t,[["render",c],["__file","07_主从复制.html.vue"]]),u=JSON.parse('{"path":"/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/04.%20Project/Platform/Web/04.%20%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/03_%E5%85%B6%E4%BB%96/07_%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html","title":"Redis主从复制","lang":"zh-CN","frontmatter":{"description":"Redis主从复制 概念、主节点与从节点 主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。 主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制 职责：且一般来说主节点负责写操作，从节点负责读操作 方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据 集群：通过设...","head":[["meta",{"property":"og:url","content":"http://192.168.0.101:8080/MdNote_Public/01.%20%E8%AE%BE%E8%AE%A1%E5%BC%80%E5%8F%91%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%94%9F%E4%BA%A7/Develop/04.%20Project/Platform/Web/04.%20%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/03_%E5%85%B6%E4%BB%96/07_%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html"}],["meta",{"property":"og:site_name","content":"Linc 的小站"}],["meta",{"property":"og:title","content":"Redis主从复制"}],["meta",{"property":"og:description","content":"Redis主从复制 概念、主节点与从节点 主从复制：指将一台Redis服务器的数据复制到其他Redis服务器。 主节点 (master) 与 从节点 (slave)：主节点和从节点的关系是：一对多、主向从单向复制 职责：且一般来说主节点负责写操作，从节点负责读操作 方式：主节点将自己的数据变化异步发送给从节点，从节点接收到后更新自己的数据 集群：通过设..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"LincZero"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis主从复制\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincZero\\",\\"url\\":\\"https://github.com/LincZero/\\"}]}"]]},"headers":[{"level":1,"title":"Redis主从复制","slug":"redis主从复制","link":"#redis主从复制","children":[{"level":2,"title":"概念、主节点与从节点","slug":"概念、主节点与从节点","link":"#概念、主节点与从节点","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[{"level":3,"title":"命令方式","slug":"命令方式","link":"#命令方式","children":[]},{"level":3,"title":"配置文件方式","slug":"配置文件方式","link":"#配置文件方式","children":[]}]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":1.38,"words":413},"filePathRelative":"MdNote_Public/01. 设计开发与数据生产/Develop/04. Project/Platform/Web/04. 后端/数据库/Redis/03_其他/07_主从复制.md","autoDesc":true}');export{m as comp,u as data};
